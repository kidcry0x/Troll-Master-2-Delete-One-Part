window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({ActionController:[function(e,t,n){"use strict";cc._RF.push(t,"4aca9P8eZxD0KeGZALp29oQ","ActionController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.NONE=0]="NONE",e[e.ACTIVE=1]="ACTIVE",e[e.ANIMATION=2]="ANIMATION"})(a||(a={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.action=a.NONE,t.target=null,t.nameNode=null,t.active=!0,t.nameAnim="",t.trackIndex=0,t.timeScale=1,t.loop=!0,t.delay=0,t.callback=[],t}return i(t,e),t.prototype.onAction=function(e){switch(e.action){case a.NONE:e.scheduleOnce(function(){e.callback.length>0&&e.runCallback(e)},e.delay);break;case a.ACTIVE:e.scheduleOnce(function(){e.nameNode.active=e.active,e.callback.length>0&&e.runCallback(e)},e.delay);break;case a.ANIMATION:e.target.timeScale=e.timeScale,e.target.setAnimation(e.trackIndex,e.nameAnim,e.loop),e.callback.length>0&&e.target.setCompleteListener(function(t){t.animation.name==e.nameAnim&&(e.target.setCompleteListener(null),e.runCallback(e))})}},t.prototype.runCallback=function(e){for(var t=e.callback.length,n=0;n<t;++n){var o=e.callback[n]._componentName,i=e.callback[n].handler;(0,e.callback[n].target.getComponent(o)[i])(e.callback[n].target.getComponent(o))}},r([l({type:cc.Enum(a)})],t.prototype,"action",void 0),r([l({type:sp.Skeleton,visible:function(){return this.action==a.ANIMATION}})],t.prototype,"target",void 0),r([l({type:cc.Node,visible:function(){return this.action==a.ACTIVE}})],t.prototype,"nameNode",void 0),r([l({visible:function(){return this.action==a.ACTIVE}})],t.prototype,"active",void 0),r([l({visible:function(){return this.action==a.ANIMATION}})],t.prototype,"nameAnim",void 0),r([l({visible:function(){return this.action==a.ANIMATION}})],t.prototype,"trackIndex",void 0),r([l({visible:function(){return this.action==a.ANIMATION}})],t.prototype,"timeScale",void 0),r([l({visible:function(){return this.action==a.ANIMATION}})],t.prototype,"loop",void 0),r([l({visible:function(){return this.action==a.ACTIVE||this.action==a.NONE}})],t.prototype,"delay",void 0),r([l({type:[cc.Component.EventHandler]})],t.prototype,"callback",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],Analytics:[function(e,t,n){"use strict";var o,i,r;cc._RF.push(t,"01426OEb+dCu48peuj4g0Gd","Analytics"),Object.defineProperty(n,"__esModule",{value:!0}),n.EGAAdType=n.EGAAdError=n.EGAAdAction=void 0,function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(o=n.EGAAdAction||(n.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(i=n.EGAAdError||(n.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(r=n.EGAAdType||(n.EGAAdType={})),n.default={EGAAdAction:o,EGAAdError:i,EGAAdType:r},cc._RF.pop()},{}],BundleManager:[function(e,t,n){"use strict";cc._RF.push(t,"30d5cF/CLFJ2bMJHpYIclSS","BundleManager");var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){this._bundle=null,this._prefabs=[],this._queue=[]}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.loadBundle=function(e,t){var n=this;cc.assetManager.loadBundle(e,function(e,o){e?console.error(e):(n._bundle=o,t&&t(o))})},e.prototype.loadLevelSequence=function(e,t,n,o){var i=this;this._bundle&&(e<t?this._bundle.load("Level"+e+"/Level"+e,cc.Prefab,function(e,t){n&&n(e,t)},function(r,a){r?console.error(r):(i._prefabs.includes(a)||i._prefabs.push(a),console.log("Add "+a.name),i.loadLevelSequence(e+1,t,n,o))}):o&&o())},e.prototype.loadLevel=function(e,t,n){var o=this;-1==this._prefabs.indexOf(e)&&(this._bundle?this._bundle.load(e+"/"+e,cc.Prefab,function(e,n){t&&t(e,n)},function(e,t){e?n&&n(e,null):(o._prefabs.includes(t)||o._prefabs.push(t),console.log("Push "+t.name),n&&n(null,t))}):this._queue.push(e))},e.prototype.setPrefab=function(e){this._prefabs=e},e.prototype.getPrefabByIndex=function(e,t){for(var n=0,o=this._prefabs;n<o.length;n++){var i=o[n];if(i.name=="Level"+e)return t&&t(null,i)}},e.prototype.getPrefabByName=function(e,t,n){for(var o=0,i=this._prefabs;o<i.length;o++){var r=i[o];if(r.name==e)return void(n&&n(null,r))}this.loadLevel(e,t,n)},e._instance=null,t=o([r],e)}());n.default=a,cc._RF.pop()},{}],Button:[function(e,t,n){"use strict";cc._RF.push(t,"119be5FDVxPkZXdC0OkGSF7","Button");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.NONE=0]="NONE",e[e.SCROLL=1]="SCROLL"})(a||(a={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.on=null,t.off=null,t.buttonName="",t._state=!0,t}return i(t,e),t.prototype.onEnable=function(){this.node.on("touchend",this.onTouchEnd,this)},t.prototype.setState=function(e){e?(this.on.opacity=255,this.off.opacity=0):(this.on.opacity=0,this.off.opacity=255)},t.prototype.onTouchEnd=function(){this._state=!this._state,this.setState(this._state);var e=new cc.Event.EventCustom("change_setting",!0);e.state=this._state,e.nameTarget=this.buttonName,this.node.dispatchEvent(e)},r([l(cc.Node)],t.prototype,"on",void 0),r([l(cc.Node)],t.prototype,"off",void 0),r([l],t.prototype,"buttonName",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],Click:[function(e,t,n){"use strict";cc._RF.push(t,"9074cYEstJDRL4trqcTiI5S","Click");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.STATE=void 0;var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.UNLOCK=0]="UNLOCK",e[e.CURRENT=1]="CURRENT",e[e.LOCK=2]="LOCK"})(a=n.STATE||(n.STATE={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlock=null,t.current=null,t.lock=null,t.iconLock=null,t._clicked=!1,t._view=null,t}return i(t,e),t.prototype.onEnable=function(){this._sprite=this.node.getComponent(cc.Sprite),this._view=this.node.parent.parent},t.prototype.setState=function(e){switch(e){case a.UNLOCK:this._sprite.spriteFrame=this.unlock,this.iconLock.active=!1;break;case a.CURRENT:this._sprite.spriteFrame=this.current,this.iconLock.active=!1;break;case a.LOCK:this._sprite.spriteFrame=this.lock,this.iconLock.active=!0}},t.prototype.onClick=function(){if(!this._clicked){var e=new cc.Event.EventCustom("onclick",!0);e.level=this.node.name,this.node.dispatchEvent(e)}},t.prototype.update=function(){var e=this.node.convertToNodeSpaceAR(this._view.position,this.node.position);e.y<-2002||e.y>-28?this.node.opacity=0:this.node.opacity=255},r([l(cc.SpriteFrame)],t.prototype,"unlock",void 0),r([l(cc.SpriteFrame)],t.prototype,"current",void 0),r([l(cc.SpriteFrame)],t.prototype,"lock",void 0),r([l(cc.Node)],t.prototype,"iconLock",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],1:[function(e,t){(function(e){"use strict";var n,o,i,r=r||function(e){var t={},n=t.lib={},o=function(){},i=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var i=0;i<e;i++)t[o+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(o+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[o+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;o<t;o+=4)n.push(4294967296*e.random()|0);return new r.init(n,t)}}),a=t.enc={},s=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new r.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new r.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,i=e.min(4*t,i),t){for(var c=0;c<t;c+=a)this._doProcessBlock(o,c);c=o.splice(0,t),n.sigBytes-=i}return new r.init(c,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=t.algo={};return t}(Math);(function(e){for(var t=r,n=(i=t.lib).WordArray,o=i.Hasher,i=t.algo,a=[],s=[],c=function(e){return 4294967296*(e-(0|e))|0},l=2,u=0;64>u;){var d;e:{d=l;for(var p=e.sqrt(d),f=2;f<=p;f++)if(!(d%f)){d=!1;break e}d=!0}d&&(8>u&&(a[u]=c(e.pow(l,.5))),s[u]=c(e.pow(l,1/3)),u++),l++}var v=[];i=i.SHA256=o.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],c=n[4],l=n[5],u=n[6],d=n[7],p=0;64>p;p++){if(16>p)v[p]=0|e[t+p];else{var f=v[p-15],h=v[p-2];v[p]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+v[p-7]+((h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+v[p-16]}f=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&u)+s[p]+v[p],h=((o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22))+(o&i^o&r^i&r),d=u,u=l,l=c,c=a+f|0,a=r,r=i,i=o,o=f+h|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(o/4294967296),n[15+(i+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=o._createHelper(i),t.HmacSHA256=o._createHmacHelper(i)})(Math),o=(n=r).enc.Utf8,n.algo.HMAC=n.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),function(){var e=r,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var r=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<n;a++)e.push(o.charAt(r>>>6*(3-a)&63));if(t=o.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,o=this._map;(i=o.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],r=0,a=0;a<n;a++)if(a%4){var s=o.indexOf(e.charAt(a-1))<<a%4*2,c=o.indexOf(e.charAt(a))>>>6-a%4*2;i[r>>>2]|=(s|c)<<24-r%4*8,r++}return t.create(i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={})),function(e){(function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok",e[e.Created=10]="Created"})(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.EventValidation=1]="EventValidation",e[e.Database=2]="Database",e[e.Init=3]="Init",e[e.Http=4]="Http",e[e.Json=5]="Json"})(e.EGASdkErrorCategory||(e.EGASdkErrorCategory={})),function(e){e[e.Undefined=0]="Undefined",e[e.BusinessEvent=1]="BusinessEvent",e[e.ResourceEvent=2]="ResourceEvent",e[e.ProgressionEvent=3]="ProgressionEvent",e[e.DesignEvent=4]="DesignEvent",e[e.ErrorEvent=5]="ErrorEvent",e[e.InitHttp=9]="InitHttp",e[e.EventsHttp=10]="EventsHttp",e[e.ProcessEvents=11]="ProcessEvents",e[e.AddEventsToStore=12]="AddEventsToStore",e[e.AdEvent=20]="AdEvent"}(e.EGASdkErrorArea||(e.EGASdkErrorArea={})),function(e){e[e.Undefined=0]="Undefined",e[e.InvalidCurrency=1]="InvalidCurrency",e[e.InvalidShortString=2]="InvalidShortString",e[e.InvalidEventPartLength=3]="InvalidEventPartLength",e[e.InvalidEventPartCharacters=4]="InvalidEventPartCharacters",e[e.InvalidStore=5]="InvalidStore",e[e.InvalidFlowType=6]="InvalidFlowType",e[e.StringEmptyOrNull=7]="StringEmptyOrNull",e[e.NotFoundInAvailableCurrencies=8]="NotFoundInAvailableCurrencies",e[e.InvalidAmount=9]="InvalidAmount",e[e.NotFoundInAvailableItemTypes=10]="NotFoundInAvailableItemTypes",e[e.WrongProgressionOrder=11]="WrongProgressionOrder",e[e.InvalidEventIdLength=12]="InvalidEventIdLength",e[e.InvalidEventIdCharacters=13]="InvalidEventIdCharacters",e[e.InvalidProgressionStatus=15]="InvalidProgressionStatus",e[e.InvalidSeverity=16]="InvalidSeverity",e[e.InvalidLongString=17]="InvalidLongString",e[e.DatabaseTooLarge=18]="DatabaseTooLarge",e[e.DatabaseOpenOrCreate=19]="DatabaseOpenOrCreate",e[e.JsonError=25]="JsonError",e[e.FailHttpJsonDecode=29]="FailHttpJsonDecode",e[e.FailHttpJsonEncode=30]="FailHttpJsonEncode",e[e.InvalidAdAction=31]="InvalidAdAction",e[e.InvalidAdType=32]="InvalidAdType",e[e.InvalidString=33]="InvalidString"}(e.EGASdkErrorAction||(e.EGASdkErrorAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Currency=1]="Currency",e[e.CartType=2]="CartType",e[e.ItemType=3]="ItemType",e[e.ItemId=4]="ItemId",e[e.Store=5]="Store",e[e.FlowType=6]="FlowType",e[e.Amount=7]="Amount",e[e.Progression01=8]="Progression01",e[e.Progression02=9]="Progression02",e[e.Progression03=10]="Progression03",e[e.EventId=11]="EventId",e[e.ProgressionStatus=12]="ProgressionStatus",e[e.Severity=13]="Severity",e[e.Message=14]="Message",e[e.AdAction=15]="AdAction",e[e.AdType=16]="AdType",e[e.AdSdkName=17]="AdSdkName",e[e.AdPlacement=18]="AdPlacement"}(e.EGASdkErrorParameter||(e.EGASdkErrorParameter={}))}(e.events||(e.events={}))}(i||(i={})),i.EGAErrorSeverity,i.EGAProgressionStatus,i.EGAResourceFlowType,function(e){(function(e){var t;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(t||(t={}));var n=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(t){e.instance.infoLogEnabled=t},e.setVerboseLog=function(t){e.instance.infoLogVerboseEnabled=t},e.i=function(n){if(e.instance.infoLogEnabled){var o="Info/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Info)}},e.w=function(n){var o="Warning/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Warning)},e.e=function(n){var o="Error/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Error)},e.ii=function(n){if(e.instance.infoLogVerboseEnabled){var o="Verbose/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Info)}},e.d=function(n){if(e.debugEnabled){var o="Debug/"+e.Tag+": "+n;e.instance.sendNotificationMessage(o,t.Debug)}},e.prototype.sendNotificationMessage=function(e,n){switch(n){case t.Error:console.error(e);break;case t.Warning:console.warn(e);break;case t.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case t.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=n})(e.logging||(e.logging={}))}(i||(i={})),function(e){(function(t){var n=e.logging.GALogger,o=function(){function e(){}return e.getHmac=function(e,t){var n=r.HmacSHA256(t,e);return r.enc.Base64.stringify(n)},e.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},e.joinStringArray=function(e,t){for(var n="",o=0,i=e.length;o<i;o++)o>0&&(n+=t),n+=e[o];return n},e.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var n in e)if(e[n]===t)return!0;return!1},e.encode64=function(t){t=encodeURI(t);var n,o,i,r,a,s="",c=0,l=0,u=0;do{i=(n=t.charCodeAt(u++))>>2,r=(3&n)<<4|(o=t.charCodeAt(u++))>>4,a=(15&o)<<2|(c=t.charCodeAt(u++))>>6,l=63&c,isNaN(o)?a=l=64:isNaN(c)&&(l=64),s=s+e.keyStr.charAt(i)+e.keyStr.charAt(r)+e.keyStr.charAt(a)+e.keyStr.charAt(l),n=o=c=0,i=r=a=l=0}while(u<t.length);return s},e.decode64=function(t){var o,i,r,a,s="",c=0,l=0,u=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&n.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=e.keyStr.indexOf(t.charAt(u++))<<2|(r=e.keyStr.indexOf(t.charAt(u++)))>>4,i=(15&r)<<4|(a=e.keyStr.indexOf(t.charAt(u++)))>>2,c=(3&a)<<6|(l=e.keyStr.indexOf(t.charAt(u++))),s+=String.fromCharCode(o),64!=a&&(s+=String.fromCharCode(i)),64!=l&&(s+=String.fromCharCode(c)),o=i=c=0,r=a=l=0}while(u<t.length);return decodeURI(s)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return(e.s4()+e.s4()+"-"+e.s4()+"-4"+e.s4().substr(0,3)+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()).toLowerCase()},e.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();t.GAUtilities=o})(e.utilities||(e.utilities={}))}(i||(i={})),function(e){(function(t){var n=e.logging.GALogger,o=e.utilities.GAUtilities,i=e.events.EGASdkErrorCategory,r=e.events.EGASdkErrorArea,a=e.events.EGASdkErrorAction,s=e.events.EGASdkErrorParameter,c=function(e,t,n,o,i){this.category=e,this.area=t,this.action=n,this.parameter=o,this.reason=i};t.ValidationResult=c;var l=function(){function t(){}return t.validateBusinessEvent=function(e,o,l,u,d){return t.validateCurrency(e)?o<0?(n.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+o),new c(i.EventValidation,r.BusinessEvent,a.InvalidAmount,s.Amount,o+"")):t.validateShortString(l,!0)?t.validateEventPartLength(u,!1)?t.validateEventPartCharacters(u)?t.validateEventPartLength(d,!1)?t.validateEventPartCharacters(d)?null:(n.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartCharacters,s.ItemId,d)):(n.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+d),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartLength,s.ItemId,d)):(n.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartCharacters,s.ItemType,u)):(n.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+u),new c(i.EventValidation,r.BusinessEvent,a.InvalidEventPartLength,s.ItemType,u)):(n.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+l),new c(i.EventValidation,r.BusinessEvent,a.InvalidShortString,s.CartType,l)):(n.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),new c(i.EventValidation,r.BusinessEvent,a.InvalidCurrency,s.Currency,e))},t.validateResourceEvent=function(l,u,d,p,f,v,h){return l==e.EGAResourceFlowType.Undefined?(n.w("Validation fail - resource event - flowType: Invalid flow type."),new c(i.EventValidation,r.ResourceEvent,a.InvalidFlowType,s.FlowType,"")):u?o.stringArrayContainsString(v,u)?d>0?p?t.validateEventPartLength(p,!1)?t.validateEventPartCharacters(p)?o.stringArrayContainsString(h,p)?t.validateEventPartLength(f,!1)?t.validateEventPartCharacters(f)?null:(n.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+f),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartCharacters,s.ItemId,f)):(n.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+f),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartLength,s.ItemId,f)):(n.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+p),new c(i.EventValidation,r.ResourceEvent,a.NotFoundInAvailableItemTypes,s.ItemType,p)):(n.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+p),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartCharacters,s.ItemType,p)):(n.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+p),new c(i.EventValidation,r.ResourceEvent,a.InvalidEventPartLength,s.ItemType,p)):(n.w("Validation fail - resource event - itemType: Cannot be (null)"),new c(i.EventValidation,r.ResourceEvent,a.StringEmptyOrNull,s.ItemType,"")):(n.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+d),new c(i.EventValidation,r.ResourceEvent,a.InvalidAmount,s.Amount,d+"")):(n.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+u),new c(i.EventValidation,r.ResourceEvent,a.NotFoundInAvailableCurrencies,s.Currency,u)):(n.w("Validation fail - resource event - currency: Cannot be (null)"),new c(i.EventValidation,r.ResourceEvent,a.StringEmptyOrNull,s.Currency,""))},t.validateProgressionEvent=function(o,l,u,d){if(o==e.EGAProgressionStatus.Undefined)return n.w("Validation fail - progression event: Invalid progression status."),new c(i.EventValidation,r.ProgressionEvent,a.InvalidProgressionStatus,s.ProgressionStatus,"");if(d&&!u&&l)return n.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),new c(i.EventValidation,r.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,l+":"+u+":"+d);if(u&&!l)return n.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),new c(i.EventValidation,r.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,l+":"+u+":"+d);if(!l)return n.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),new c(i.EventValidation,r.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,(l||"")+":"+(u||"")+":"+(d||""));if(!t.validateEventPartLength(l,!1))return n.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+l),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartLength,s.Progression01,l);if(!t.validateEventPartCharacters(l))return n.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression01,l);if(u){if(!t.validateEventPartLength(u,!0))return n.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+u),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartLength,s.Progression02,u);if(!t.validateEventPartCharacters(u))return n.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression02,u)}if(d){if(!t.validateEventPartLength(d,!0))return n.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+d),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartLength,s.Progression03,d);if(!t.validateEventPartCharacters(d))return n.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(i.EventValidation,r.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression03,d)}return null},t.validateDesignEvent=function(e){return t.validateEventIdLength(e)?t.validateEventIdCharacters(e)?null:(n.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),new c(i.EventValidation,r.DesignEvent,a.InvalidEventIdCharacters,s.EventId,e)):(n.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 64 characters or less. String: "+e),new c(i.EventValidation,r.DesignEvent,a.InvalidEventIdLength,s.EventId,e))},t.validateErrorEvent=function(o,l){return o==e.EGAErrorSeverity.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(i.EventValidation,r.ErrorEvent,a.InvalidSeverity,s.Severity,"")):t.validateLongString(l,!0)?null:(n.w("Validation fail - error event - message: Message cannot be above 8192 characters."),new c(i.EventValidation,r.ErrorEvent,a.InvalidLongString,s.Message,l))},t.validateAdEvent=function(o,l,u,d){return o==e.EGAAdAction.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(i.EventValidation,r.AdEvent,a.InvalidAdAction,s.AdAction,"")):l==e.EGAAdType.Undefined?(n.w("Validation fail - ad event - adType: Ad type was unsupported value."),new c(i.EventValidation,r.AdEvent,a.InvalidAdType,s.AdType,"")):t.validateShortString(u,!1)?t.validateString(d,!1)?null:(n.w("Validation fail - ad event - message: Ad placement cannot be above 64 characters."),new c(i.EventValidation,r.AdEvent,a.InvalidString,s.AdPlacement,d)):(n.w("Validation fail - ad event - message: Ad SDK name cannot be above 32 characters."),new c(i.EventValidation,r.AdEvent,a.InvalidShortString,s.AdSdkName,u))},t.validateSdkErrorEvent=function(e,o,s,c,l){return!(!t.validateKeys(e,o)||(s===i.Undefined?(n.w("Validation fail - sdk error event - type: Category was unsupported value."),1):c===r.Undefined?(n.w("Validation fail - sdk error event - type: Area was unsupported value."),1):l===a.Undefined&&(n.w("Validation fail - sdk error event - type: Action was unsupported value."),1)))},t.validateKeys=function(e,t){return!(!o.stringMatch(e,/^[A-z0-9]{32}$/)||!o.stringMatch(t,/^[A-z0-9]{40}$/))},t.validateCurrency=function(e){return!!e&&!!o.stringMatch(e,/^[A-Z]{3}$/)},t.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(e.length>64)},t.validateEventPartCharacters=function(e){return!!o.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},t.validateEventIdLength=function(e){return!!e&&!!o.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},t.validateEventIdCharacters=function(e){return!!e&&!!o.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},t.validateAndCleanInitRequestResponse=function(e,t){if(null==e)return n.w("validateInitRequestResponse failed - no response dictionary."),null;var o={};try{var i=e.server_ts;if(!(i>0))return n.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;o.server_ts=i}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+l),null}if(t){try{var r=e.configs;o.configs=r}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'configs' field. type="+typeof e.configs+", value="+e.configs+", "+l),null}try{var a=e.configs_hash;o.configs_hash=a}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'configs_hash' field. type="+typeof e.configs_hash+", value="+e.configs_hash+", "+l),null}try{var s=e.ab_id;o.ab_id=s}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'ab_id' field. type="+typeof e.ab_id+", value="+e.ab_id+", "+l),null}try{var c=e.ab_variant_id;o.ab_variant_id=c}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'ab_variant_id' field. type="+typeof e.ab_variant_id+", value="+e.ab_variant_id+", "+l),null}}return o},t.validateBuild=function(e){return!!t.validateShortString(e,!1)},t.validateSdkWrapperVersion=function(e){return!!o.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot|flutter) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},t.validateEngineVersion=function(e){return!(!e||!o.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},t.validateUserId=function(e){return!!t.validateString(e,!1)||(n.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},t.validateShortString=function(e,t){return!(!t||e)||!(!e||e.length>32)},t.validateString=function(e,t){return!(!t||e)||!(!e||e.length>64)},t.validateLongString=function(e,t){return!(!t||e)||!(!e||e.length>8192)},t.validateConnectionType=function(e){return o.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},t.validateCustomDimensions=function(e){return t.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},t.validateResourceCurrencies=function(e){if(!t.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var i=0;i<e.length;++i)if(!o.stringMatch(e[i],/^[A-Za-z]+$/))return n.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[i]),!1;return!0},t.validateResourceItemTypes=function(e){if(!t.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var o=0;o<e.length;++o)if(!t.validateEventPartCharacters(e[o]))return n.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[o]),!1;return!0},t.validateDimension01=function(e,t){return!e||!!o.stringArrayContainsString(t,e)},t.validateDimension02=function(e,t){return!e||!!o.stringArrayContainsString(t,e)},t.validateDimension03=function(e,t){return!e||!!o.stringArrayContainsString(t,e)},t.validateArrayOfStrings=function(e,t,o,i,r){var a=i;if(a||(a="Array"),!r)return n.w(a+" validation failed: array cannot be null. "),!1;if(0==o&&0==r.length)return n.w(a+" validation failed: array cannot be empty. "),!1;if(e>0&&r.length>e)return n.w(a+" validation failed: array cannot exceed "+e+" values. It has "+r.length+" values."),!1;for(var s=0;s<r.length;++s){var c=r[s]?r[s].length:0;if(0===c)return n.w(a+" validation failed: contained an empty string. Array="+JSON.stringify(r)),!1;if(t>0&&c>t)return n.w(a+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+r[s]),!1}return!0},t.validateClientTs=function(e){return!(e<0||e>99999999999)},t}();t.GAValidator=l})(e.validators||(e.validators={}))}(i||(i={})),function(e){(function(e){var t=function(e,t,n){this.name=e,this.value=t,this.version=n};e.NameValueVersion=t;var n=function(e,t){this.name=e,this.version=t};e.NameVersion=n;var o=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var t,n=navigator.userAgent,o=n.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==o.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(o[1]))return"IE "+((t=/\brv[ :]+(\d+)/g.exec(n)||[])[1]||"");if("Chrome"===o[1]&&null!=(t=n.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return t.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(o[1]&&"fbav"===o[1].toLowerCase()&&(o[1]="facebook",o[2]))return"facebook "+o[2];var i=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(t=n.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,t){var o,i,r,a,s=new n("unknown","0.0.0"),c=0,l=0;for(c=0;c<t.length;c+=1)if(new RegExp(t[c].value,"i").test(e)){if(o=new RegExp(t[c].version+"[- /:;]([\\d._]+)","i"),a="",(i=e.match(o))&&i[1]&&(r=i[1]),r){var u=r.split(/[._]+/);for(l=0;l<Math.min(u.length,3);l+=1)a+=u[l]+(l<Math.min(u.length,3)-1?".":"")}else a="0.0.0";return s.name=t[c].name,s.version=a,s}return s},e.sdkWrapperVersion="javascript 4.2.3",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv"),new t("kai_os","KAIOS","KAIOS")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e}();e.GADevice=o})(e.device||(e.device={}))}(i||(i={})),function(e){(function(e){var t=function(){function e(t){this.deadline=t,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=t})(e.threading||(e.threading={}))}(i||(i={})),function(e){(function(e){var t=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var t=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,n){return t.comparer.compare(e,n)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}();e.PriorityQueue=t})(e.threading||(e.threading={}))}(i||(i={})),function(e){(function(t){var n,o,i=e.logging.GALogger;(function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"})(n=t.EGAStoreArgsOperator||(t.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(o=t.EGAStore||(t.EGAStore={}));var r=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(t){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(t,o,i,r){void 0===o&&(o=[]),void 0===i&&(i=!1),void 0===r&&(r=0);var a=e.getStore(t);if(!a)return null;for(var s=[],c=0;c<a.length;++c){for(var l=a[c],u=!0,d=0;d<o.length;++d){var p=o[d];if(l[p[0]])switch(p[1]){case n.Equal:u=l[p[0]]==p[2];break;case n.LessOrEqual:u=l[p[0]]<=p[2];break;case n.NotEqual:u=l[p[0]]!=p[2];break;default:u=!1}else u=!1;if(!u)break}u&&s.push(l)}return i&&s.sort(function(e,t){return e.client_ts-t.client_ts}),r>0&&s.length>r&&(s=s.slice(0,r+1)),s},e.update=function(t,o,i){void 0===i&&(i=[]);var r=e.getStore(t);if(!r)return!1;for(var a=0;a<r.length;++a){for(var s=r[a],c=!0,l=0;l<i.length;++l){var u=i[l];if(s[u[0]])switch(u[1]){case n.Equal:c=s[u[0]]==u[2];break;case n.LessOrEqual:c=s[u[0]]<=u[2];break;case n.NotEqual:c=s[u[0]]!=u[2];break;default:c=!1}else c=!1;if(!c)break}if(c)for(l=0;l<o.length;++l){var d=o[l];s[d[0]]=d[1]}}return!0},e.delete=function(t,o){var i=e.getStore(t);if(i)for(var r=0;r<i.length;++r){for(var a=i[r],s=!0,c=0;c<o.length;++c){var l=o[c];if(a[l[0]])switch(l[1]){case n.Equal:s=a[l[0]]==l[2];break;case n.LessOrEqual:s=a[l[0]]<=l[2];break;case n.NotEqual:s=a[l[0]]!=l[2];break;default:s=!1}else s=!1;if(!s)break}s&&(i.splice(r,1),--r)}},e.insert=function(t,n,o,i){void 0===o&&(o=!1),void 0===i&&(i=null);var r=e.getStore(t);if(r)if(o){if(!i)return;for(var a=!1,s=0;s<r.length;++s){var c=r[s];if(c[i]==n[i]){for(var l in n)c[l]=n[l];a=!0;break}}a||r.push(n)}else r.push(n)},e.save=function(t){e.isStorageAvailable()?(localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey),JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey),JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey),JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey),JSON.stringify(e.instance.storeItems))):i.w("Storage is not available, cannot save.")},e.load=function(t){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey))),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){i.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey))),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){i.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey))),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){i.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey))),e.instance.storeItems||(e.instance.storeItems={})}catch(n){i.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else i.w("Storage is not available, cannot load.")},e.setItem=function(t,n,o){var i=e.StringFormat(e.KeyFormat,t,n);o?e.instance.storeItems[i]=o:i in e.instance.storeItems&&delete e.instance.storeItems[i]},e.getItem=function(t,n){var o=e.StringFormat(e.KeyFormat,t,n);return o in e.instance.storeItems?e.instance.storeItems[o]:null},e.getStore=function(t){switch(t){case o.Events:return e.instance.eventsStore;case o.Sessions:return e.instance.sessionsStore;case o.Progression:return e.instance.progressionStore;default:return i.w("GAStore.getStore(): Cannot find store: "+t),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.StringFormat=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/{(\d+)}/g,function(e,n){return t[n]||""})},e.KeyFormat="GA::{0}::{1}",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();t.GAStore=r})(e.store||(e.store={}))}(i||(i={})),function(e){(function(t){var n=e.validators.GAValidator,o=e.utilities.GAUtilities,i=e.logging.GALogger,r=e.store.GAStore,a=e.device.GADevice,s=e.store.EGAStore,c=e.store.EGAStoreArgsOperator,l=function(){function e(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.remoteConfigsListeners=[],this.beforeUnloadListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0,this.isUnloading=!1}return e.setUserId=function(t){e.instance.userId=t,e.cacheIdentifier()},e.getIdentifier=function(){return e.instance.identifier},e.isInitialized=function(){return e.instance.initialized},e.setInitialized=function(t){e.instance.initialized=t},e.getSessionStart=function(){return e.instance.sessionStart},e.getSessionNum=function(){return e.instance.sessionNum},e.getTransactionNum=function(){return e.instance.transactionNum},e.getSessionId=function(){return e.instance.sessionId},e.getCurrentCustomDimension01=function(){return e.instance.currentCustomDimension01},e.getCurrentCustomDimension02=function(){return e.instance.currentCustomDimension02},e.getCurrentCustomDimension03=function(){return e.instance.currentCustomDimension03},e.getGameKey=function(){return e.instance.gameKey},e.getGameSecret=function(){return e.instance.gameSecret},e.getAvailableCustomDimensions01=function(){return e.instance.availableCustomDimensions01},e.setAvailableCustomDimensions01=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions01=t,e.validateAndFixCurrentDimensions(),i.i("Set available custom01 dimension values: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions02=function(){return e.instance.availableCustomDimensions02},e.setAvailableCustomDimensions02=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions02=t,e.validateAndFixCurrentDimensions(),i.i("Set available custom02 dimension values: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions03=function(){return e.instance.availableCustomDimensions03},e.setAvailableCustomDimensions03=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions03=t,e.validateAndFixCurrentDimensions(),i.i("Set available custom03 dimension values: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableResourceCurrencies=function(){return e.instance.availableResourceCurrencies},e.setAvailableResourceCurrencies=function(t){n.validateResourceCurrencies(t)&&(e.instance.availableResourceCurrencies=t,i.i("Set available resource currencies: ("+o.joinStringArray(t,", ")+")"))},e.getAvailableResourceItemTypes=function(){return e.instance.availableResourceItemTypes},e.setAvailableResourceItemTypes=function(t){n.validateResourceItemTypes(t)&&(e.instance.availableResourceItemTypes=t,i.i("Set available resource item types: ("+o.joinStringArray(t,", ")+")"))},e.getBuild=function(){return e.instance.build},e.setBuild=function(t){e.instance.build=t,i.i("Set build version: "+t)},e.getUseManualSessionHandling=function(){return e.instance.useManualSessionHandling},e.isEventSubmissionEnabled=function(){return e.instance._isEventSubmissionEnabled},e.getABTestingId=function(){return e.instance.abId},e.getABTestingVariantId=function(){return e.instance.abVariantId},e.prototype.setDefaultId=function(t){this.defaultUserId=t||"",e.cacheIdentifier()},e.getDefaultId=function(){return e.instance.defaultUserId},e.getSdkConfig=function(){var t,n=0;for(var o in e.instance.sdkConfig)0===n&&(t=o),++n;if(t&&n>0)return e.instance.sdkConfig;for(var o in n=0,e.instance.sdkConfigCached)0===n&&(t=o),++n;return t&&n>0?e.instance.sdkConfigCached:e.instance.sdkConfigDefault},e.isEnabled=function(){return!!e.instance.initAuthorized},e.setCustomDimension01=function(t){e.instance.currentCustomDimension01=t,r.setItem(e.getGameKey(),e.Dimension01Key,t),i.i("Set custom01 dimension value: "+t)},e.setCustomDimension02=function(t){e.instance.currentCustomDimension02=t,r.setItem(e.getGameKey(),e.Dimension02Key,t),i.i("Set custom02 dimension value: "+t)},e.setCustomDimension03=function(t){e.instance.currentCustomDimension03=t,r.setItem(e.getGameKey(),e.Dimension03Key,t),i.i("Set custom03 dimension value: "+t)},e.incrementSessionNum=function(){var t=e.getSessionNum()+1;e.instance.sessionNum=t},e.incrementTransactionNum=function(){var t=e.getTransactionNum()+1;e.instance.transactionNum=t},e.incrementProgressionTries=function(t){var n=e.getProgressionTries(t)+1;e.instance.progressionTries[t]=n;var o={};o.progression=t,o.tries=n,r.insert(s.Progression,o,!0,"progression")},e.getProgressionTries=function(t){return t in e.instance.progressionTries?e.instance.progressionTries[t]:0},e.clearProgressionTries=function(t){t in e.instance.progressionTries&&delete e.instance.progressionTries[t];var n=[];n.push(["progression",c.Equal,t]),r.delete(s.Progression,n)},e.setKeys=function(t,n){e.instance.gameKey=t,e.instance.gameSecret=n},e.setManualSessionHandling=function(t){e.instance.useManualSessionHandling=t,i.i("Use manual session handling: "+t)},e.setEnabledEventSubmission=function(t){e.instance._isEventSubmissionEnabled=t},e.getEventAnnotations=function(){var t={v:2};t.user_id=e.instance.identifier,t.client_ts=e.getClientTsAdjusted(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.browser_version=a.browserVersion,t.platform=a.buildPlatform,t.session_id=e.instance.sessionId,t[e.SessionNumKey]=e.instance.sessionNum;var o=a.getConnectionType();if(n.validateConnectionType(o)&&(t.connection_type=o),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),e.instance.configurations){var i=0;for(var r in e.instance.configurations){i++;break}i>0&&(t.configurations=e.instance.configurations)}return e.instance.abId&&(t.ab_id=e.instance.abId),e.instance.abVariantId&&(t.ab_variant_id=e.instance.abVariantId),e.instance.build&&(t.build=e.instance.build),t},e.getSdkErrorEventAnnotations=function(){var t={v:2};t.category=e.CategorySdkError,t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.platform=a.buildPlatform;var o=a.getConnectionType();return n.validateConnectionType(o)&&(t.connection_type=o),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),t},e.getInitAnnotations=function(){var t={};return e.getIdentifier()||e.cacheIdentifier(),t.user_id=e.getIdentifier(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.platform=a.buildPlatform,e.getBuild()?t.build=e.getBuild():t.build=null,t.session_num=e.getSessionNum(),t.random_salt=e.getSessionNum(),t},e.getClientTsAdjusted=function(){var t=o.timeIntervalSince1970(),i=t+e.instance.clientServerTimeOffset;return n.validateClientTs(i)?i:t},e.sessionIsStarted=function(){return 0!=e.instance.sessionStart},e.cacheIdentifier=function(){e.instance.userId?e.instance.identifier=e.instance.userId:e.instance.defaultUserId&&(e.instance.identifier=e.instance.defaultUserId)},e.ensurePersistedStates=function(){r.isStorageAvailable()&&r.load(e.getGameKey());var t=e.instance;t.setDefaultId(null!=r.getItem(e.getGameKey(),e.DefaultUserIdKey)?r.getItem(e.getGameKey(),e.DefaultUserIdKey):o.createGuid()),t.sessionNum=null!=r.getItem(e.getGameKey(),e.SessionNumKey)?Number(r.getItem(e.getGameKey(),e.SessionNumKey)):0,t.transactionNum=null!=r.getItem(e.getGameKey(),e.TransactionNumKey)?Number(r.getItem(e.getGameKey(),e.TransactionNumKey)):0,t.currentCustomDimension01?r.setItem(e.getGameKey(),e.Dimension01Key,t.currentCustomDimension01):(t.currentCustomDimension01=null!=r.getItem(e.getGameKey(),e.Dimension01Key)?r.getItem(e.getGameKey(),e.Dimension01Key):"",t.currentCustomDimension01),t.currentCustomDimension02?r.setItem(e.getGameKey(),e.Dimension02Key,t.currentCustomDimension02):(t.currentCustomDimension02=null!=r.getItem(e.getGameKey(),e.Dimension02Key)?r.getItem(e.getGameKey(),e.Dimension02Key):"",t.currentCustomDimension02),t.currentCustomDimension03?r.setItem(e.getGameKey(),e.Dimension03Key,t.currentCustomDimension03):(t.currentCustomDimension03=null!=r.getItem(e.getGameKey(),e.Dimension03Key)?r.getItem(e.getGameKey(),e.Dimension03Key):"",t.currentCustomDimension03);var n=null!=r.getItem(e.getGameKey(),e.SdkConfigCachedKey)?r.getItem(e.getGameKey(),e.SdkConfigCachedKey):"";if(n){var i=JSON.parse(o.decode64(n));i&&(t.sdkConfigCached=i)}var a=e.getSdkConfig();t.configsHash=a.configs_hash?a.configs_hash:"",t.abId=a.ab_id?a.ab_id:"",t.abVariantId=a.ab_variant_id?a.ab_variant_id:"";var c=r.select(s.Progression);if(c)for(var l=0;l<c.length;++l){var u=c[l];u&&(t.progressionTries[u.progression]=u.tries)}},e.calculateServerTimeOffset=function(e){return e-o.timeIntervalSince1970()},e.validateAndCleanCustomFields=function(t){var n={};if(t){var r=0;for(var a in t){var s=t[a];if(a&&s)if(r<e.MAX_CUSTOM_FIELDS_COUNT){var c=new RegExp("^[a-zA-Z0-9_]{1,"+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(o.stringMatch(a,c)){var l=typeof s;if("string"===l||s instanceof String){var u=s;u.length<=e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&u.length>0?(n[a]=u,++r):i.w("validateAndCleanCustomFields: entry with key="+a+", value="+s+" has been omitted because its value is an empty string or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===l||s instanceof Number){var d=s;n[a]=d,++r}else i.w("validateAndCleanCustomFields: entry with key="+a+", value="+s+" has been omitted because its value is not a string or number")}else i.w("validateAndCleanCustomFields: entry with key="+a+", value="+s+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else i.w("validateAndCleanCustomFields: entry with key="+a+", value="+s+" has been omitted because it exceeds the max number of custom fields ("+e.MAX_CUSTOM_FIELDS_COUNT+")");else i.w("validateAndCleanCustomFields: entry with key="+a+", value="+s+" has been omitted because its key or value is null")}}return n},e.validateAndFixCurrentDimensions=function(){n.validateDimension01(e.getCurrentCustomDimension01(),e.getAvailableCustomDimensions01())||e.setCustomDimension01(""),n.validateDimension02(e.getCurrentCustomDimension02(),e.getAvailableCustomDimensions02())||e.setCustomDimension02(""),n.validateDimension03(e.getCurrentCustomDimension03(),e.getAvailableCustomDimensions03())||e.setCustomDimension03("")},e.getConfigurationStringValue=function(t,n){return e.instance.configurations[t]?e.instance.configurations[t].toString():n},e.isRemoteConfigsReady=function(){return e.instance.remoteConfigsIsReady},e.addRemoteConfigsListener=function(t){e.instance.remoteConfigsListeners.indexOf(t)<0&&e.instance.remoteConfigsListeners.push(t)},e.removeRemoteConfigsListener=function(t){var n=e.instance.remoteConfigsListeners.indexOf(t);n>-1&&e.instance.remoteConfigsListeners.splice(n,1)},e.getRemoteConfigsContentAsString=function(){return JSON.stringify(e.instance.configurations)},e.populateConfigurations=function(t){var n=t.configs;if(n){e.instance.configurations={};for(var o=0;o<n.length;++o){var i=n[o];if(i){var r=i.key,a=i.value,s=i.start_ts?i.start_ts:Number.MIN_VALUE,c=i.end_ts?i.end_ts:Number.MAX_VALUE,l=e.getClientTsAdjusted();r&&a&&l>s&&l<c&&(e.instance.configurations[r]=a)}}}e.instance.remoteConfigsIsReady=!0;var u=e.instance.remoteConfigsListeners;for(o=0;o<u.length;++o)u[o]&&u[o].onRemoteConfigsUpdated()},e.addOnBeforeUnloadListener=function(t){e.instance.beforeUnloadListeners.indexOf(t)<0&&e.instance.beforeUnloadListeners.push(t)},e.removeOnBeforeUnloadListener=function(t){var n=e.instance.beforeUnloadListeners.indexOf(t);n>-1&&e.instance.beforeUnloadListeners.splice(n,1)},e.notifyBeforeUnloadListeners=function(){for(var t=e.instance.beforeUnloadListeners,n=0;n<t.length;++n)t[n]&&t[n].onBeforeUnload()},e.CategorySdkError="sdk_error",e.MAX_CUSTOM_FIELDS_COUNT=50,e.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,e.instance=new e,e.DefaultUserIdKey="default_user_id",e.SessionNumKey="session_num",e.TransactionNumKey="transaction_num",e.Dimension01Key="dimension01",e.Dimension02Key="dimension02",e.Dimension03Key="dimension03",e.SdkConfigCachedKey="sdk_config_cached",e}();t.GAState=l})(e.state||(e.state={}))}(i||(i={})),function(e){(function(t){var n=e.utilities.GAUtilities,o=e.logging.GALogger,i=function(){function e(){}return e.execute=function(t,i,r,a){var s=new Date;if(e.timestampMap[i]||(e.timestampMap[i]=s),e.countMap[i]||(e.countMap[i]=0),(s.getTime()-e.timestampMap[i].getTime())/1e3>=3600&&(e.timestampMap[i]=s,e.countMap[i]=0),!(e.countMap[i]>=e.MaxCount)){var c=n.getHmac(a,r),l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){if(!l.responseText)return;if(200!=l.status)return void o.w("sdk error failed. response code not 200. status code: "+l.status+", description: "+l.statusText+", body: "+l.responseText);e.countMap[i]=e.countMap[i]+1}},l.open("POST",t,!0),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Authorization",c);try{l.send(r)}catch(u){console.error(u)}}},e.MaxCount=10,e.countMap={},e.timestampMap={},e}();t.SdkErrorTask=i})(e.tasks||(e.tasks={}))}(i||(i={})),function(e){(function(t){var n=e.state.GAState,o=e.logging.GALogger,i=e.utilities.GAUtilities,r=e.validators.GAValidator,a=e.tasks.SdkErrorTask,s=e.events.EGASdkErrorCategory,c=e.events.EGASdkErrorArea,l=e.events.EGASdkErrorAction,u=e.events.EGASdkErrorParameter,d=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.remoteConfigsVersion="v1",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.remoteConfigsBaseUrl=this.protocol+"://"+this.hostName+"/remote_configs/"+this.remoteConfigsVersion,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(o,i){var r=n.getGameKey(),a=this.remoteConfigsBaseUrl+"/"+this.initializeUrlPath+"?game_key="+r+"&interval_seconds=0&configs_hash="+o,s=n.getInitAnnotations(),c=JSON.stringify(s);if(c){var l=this.createPayloadData(c,this.useGzip),u=[];u.push(c),e.sendRequest(a,l,u,this.useGzip,e.initRequestCallback,i)}else i(t.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(o,i,r){if(0!=o.length){var a=n.getGameKey(),s=this.baseUrl+"/"+a+"/"+this.eventsUrlPath,c=JSON.stringify(o);if(c){var l=this.createPayloadData(c,this.useGzip),u=[];u.push(c),u.push(i),u.push(o.length.toString()),e.sendRequest(s,l,u,this.useGzip,e.sendEventInArrayRequestCallback,r)}else r(t.EGAHTTPApiResponse.JsonEncodeFailed,null,i,o.length)}},e.prototype.sendSdkErrorEvent=function(t,i,s,c,l,u,d){if(n.isEventSubmissionEnabled()&&r.validateSdkErrorEvent(u,d,t,i,s)){var p,f=this.baseUrl+"/"+u+"/"+this.eventsUrlPath,v="",h=n.getSdkErrorEventAnnotations(),g=e.sdkErrorCategoryString(t);h.error_category=g,v+=g;var y=e.sdkErrorAreaString(i);h.error_area=y,v+=":"+y;var m=e.sdkErrorActionString(s);h.error_action=m;var _=e.sdkErrorParameterString(c);if(_.length>0&&(h.error_parameter=_),l.length>0){var E=l;l.length>e.MAX_ERROR_MESSAGE_LENGTH&&(E=l.substring(0,e.MAX_ERROR_MESSAGE_LENGTH)),h.reason=E}var A=[];A.push(h),(p=JSON.stringify(A))?a.execute(f,v,p,d):o.w("sendSdkErrorEvent: JSON encoding failed.")}},e.sendEventInArrayRequestCallback=function(o,i,r,a){void 0===a&&(a=null),a[0],a[1];var d,p,f=a[2],v=parseInt(a[3]);d=o.responseText,p=o.status;var h=e.instance.processRequestResponse(p,o.statusText,d,"Events");if(h==t.EGAHTTPApiResponse.Ok||h==t.EGAHTTPApiResponse.Created||h==t.EGAHTTPApiResponse.BadRequest){var g=d?JSON.parse(d):{};if(null==g)return r(t.EGAHTTPApiResponse.JsonDecodeFailed,null,f,v),void e.instance.sendSdkErrorEvent(s.Http,c.EventsHttp,l.FailHttpJsonDecode,u.Undefined,d,n.getGameKey(),n.getGameSecret());t.EGAHTTPApiResponse.BadRequest,r(h,g,f,v)}else r(h,null,f,v)},e.sendRequest=function(e,t,o,r,a,s){var c=new XMLHttpRequest,l=n.getGameSecret(),u=i.getHmac(l,t),d=[];for(var p in d.push(u),o)d.push(o[p]);if(c.onreadystatechange=function(){4===c.readyState&&a(c,e,s,d)},c.open("POST",e,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization",u),r)throw new Error("gzip not supported");try{c.send(t)}catch(f){console.error(f.stack)}},e.initRequestCallback=function(o,i,a,d){var p,f;void 0===d&&(d=null),d[0],d[1],p=o.responseText,f=o.status;var v=p?JSON.parse(p):{},h=e.instance.processRequestResponse(f,o.statusText,p,"Init");if(h==t.EGAHTTPApiResponse.Ok||h==t.EGAHTTPApiResponse.Created||h==t.EGAHTTPApiResponse.BadRequest){if(null==v)return a(t.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0),void e.instance.sendSdkErrorEvent(s.Http,c.InitHttp,l.FailHttpJsonDecode,u.Undefined,p,n.getGameKey(),n.getGameSecret());if(h!==t.EGAHTTPApiResponse.BadRequest){var g=r.validateAndCleanInitRequestResponse(v,h===t.EGAHTTPApiResponse.Created);g?a(h,g,"",0):a(t.EGAHTTPApiResponse.BadResponse,null,"",0)}else a(h,null,"",0)}else a(h,null,"",0)},e.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,n,o){return o?200===e?t.EGAHTTPApiResponse.Ok:201===e?t.EGAHTTPApiResponse.Created:0===e||401===e?t.EGAHTTPApiResponse.Unauthorized:400===e?t.EGAHTTPApiResponse.BadRequest:500===e?t.EGAHTTPApiResponse.InternalServerError:t.EGAHTTPApiResponse.UnknownResponseCode:t.EGAHTTPApiResponse.NoResponse},e.sdkErrorCategoryString=function(e){switch(e){case s.EventValidation:return"event_validation";case s.Database:return"db";case s.Init:return"init";case s.Http:return"http";case s.Json:return"json"}return""},e.sdkErrorAreaString=function(e){switch(e){case c.BusinessEvent:return"business";case c.ResourceEvent:return"resource";case c.ProgressionEvent:return"progression";case c.DesignEvent:return"design";case c.ErrorEvent:return"error";case c.InitHttp:return"init_http";case c.EventsHttp:return"events_http";case c.ProcessEvents:return"process_events";case c.AddEventsToStore:return"add_events_to_store"}return""},e.sdkErrorActionString=function(e){switch(e){case l.InvalidCurrency:return"invalid_currency";case l.InvalidShortString:return"invalid_short_string";case l.InvalidEventPartLength:return"invalid_event_part_length";case l.InvalidEventPartCharacters:return"invalid_event_part_characters";case l.InvalidStore:return"invalid_store";case l.InvalidFlowType:return"invalid_flow_type";case l.StringEmptyOrNull:return"string_empty_or_null";case l.NotFoundInAvailableCurrencies:return"not_found_in_available_currencies";case l.InvalidAmount:return"invalid_amount";case l.NotFoundInAvailableItemTypes:return"not_found_in_available_item_types";case l.WrongProgressionOrder:return"wrong_progression_order";case l.InvalidEventIdLength:return"invalid_event_id_length";case l.InvalidEventIdCharacters:return"invalid_event_id_characters";case l.InvalidProgressionStatus:return"invalid_progression_status";case l.InvalidSeverity:return"invalid_severity";case l.InvalidLongString:return"invalid_long_string";case l.DatabaseTooLarge:return"db_too_large";case l.DatabaseOpenOrCreate:return"db_open_or_create";case l.JsonError:return"json_error";case l.FailHttpJsonDecode:return"fail_http_json_decode";case l.FailHttpJsonEncode:return"fail_http_json_encode"}return""},e.sdkErrorParameterString=function(e){switch(e){case u.Currency:return"currency";case u.CartType:return"cart_type";case u.ItemType:return"item_type";case u.ItemId:return"item_id";case u.Store:return"store";case u.FlowType:return"flow_type";case u.Amount:return"amount";case u.Progression01:return"progression01";case u.Progression02:return"progression02";case u.Progression03:return"progression03";case u.EventId:return"event_id";case u.ProgressionStatus:return"progression_status";case u.Severity:return"severity";case u.Message:return"message"}return""},e.instance=new e,e.MAX_ERROR_MESSAGE_LENGTH=256,e}();t.GAHTTPApi=d})(e.http||(e.http={}))}(i||(i={})),function(e){var t,n,o,i,r,a,s,c,l,u,d;t=e.events||(e.events={}),n=e.store.GAStore,o=e.store.EGAStore,i=e.store.EGAStoreArgsOperator,r=e.state.GAState,a=e.logging.GALogger,s=e.utilities.GAUtilities,c=e.http.EGAHTTPApiResponse,l=e.http.GAHTTPApi,u=e.validators.GAValidator,d=function(){function d(){}return d.addSessionStartEvent=function(){if(r.isEventSubmissionEnabled()){var e={};e.category=d.CategorySessionStart,r.incrementSessionNum(),n.setItem(r.getGameKey(),r.SessionNumKey,r.getSessionNum().toString()),d.addDimensionsToEvent(e),d.addEventToStore(e),a.i("Add SESSION START event"),d.processEvents(d.CategorySessionStart,!1)}},d.addSessionEndEvent=function(){if(r.isEventSubmissionEnabled()){var e=r.getSessionStart(),t=r.getClientTsAdjusted()-e;t<0&&(a.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var n={};n.category=d.CategorySessionEnd,n.length=t,d.addDimensionsToEvent(n),d.addEventToStore(n),a.i("Add SESSION END event."),d.processEvents("",!1)}},d.addBusinessEvent=function(e,t,o,i,s,c){if(void 0===s&&(s=null),r.isEventSubmissionEnabled()){var p=u.validateBusinessEvent(e,t,s,o,i);if(null==p){var f={};r.incrementTransactionNum(),n.setItem(r.getGameKey(),r.TransactionNumKey,r.getTransactionNum().toString()),f.event_id=o+":"+i,f.category=d.CategoryBusiness,f.currency=e,f.amount=t,f[r.TransactionNumKey]=r.getTransactionNum(),s&&(f.cart_type=s),d.addDimensionsToEvent(f),d.addFieldsToEvent(f,r.validateAndCleanCustomFields(c)),a.i("Add BUSINESS event: {currency:"+e+", amount:"+t+", itemType:"+o+", itemId:"+i+", cartType:"+s+"}"),d.addEventToStore(f)}else l.instance.sendSdkErrorEvent(p.category,p.area,p.action,p.parameter,p.reason,r.getGameKey(),r.getGameSecret())}},d.addResourceEvent=function(t,n,o,i,s,c){if(r.isEventSubmissionEnabled()){var p=u.validateResourceEvent(t,n,o,i,s,r.getAvailableResourceCurrencies(),r.getAvailableResourceItemTypes());if(null==p){t===e.EGAResourceFlowType.Sink&&(o*=-1);var f={},v=d.resourceFlowTypeToString(t);f.event_id=v+":"+n+":"+i+":"+s,f.category=d.CategoryResource,f.amount=o,d.addDimensionsToEvent(f),d.addFieldsToEvent(f,r.validateAndCleanCustomFields(c)),a.i("Add RESOURCE event: {currency:"+n+", amount:"+o+", itemType:"+i+", itemId:"+s+"}"),d.addEventToStore(f)}else l.instance.sendSdkErrorEvent(p.category,p.area,p.action,p.parameter,p.reason,r.getGameKey(),r.getGameSecret())}},d.addProgressionEvent=function(t,n,o,i,s,c,p){if(r.isEventSubmissionEnabled()){var f=d.progressionStatusToString(t),v=u.validateProgressionEvent(t,n,o,i);if(null==v){var h,g={};h=o?i?n+":"+o+":"+i:n+":"+o:n,g.category=d.CategoryProgression,g.event_id=f+":"+h;var y=0;c&&t!=e.EGAProgressionStatus.Start&&(g.score=Math.round(s)),t===e.EGAProgressionStatus.Fail&&r.incrementProgressionTries(h),t===e.EGAProgressionStatus.Complete&&(r.incrementProgressionTries(h),y=r.getProgressionTries(h),g.attempt_num=y,r.clearProgressionTries(h)),d.addDimensionsToEvent(g),d.addFieldsToEvent(g,r.validateAndCleanCustomFields(p)),a.i("Add PROGRESSION event: {status:"+f+", progression01:"+n+", progression02:"+o+", progression03:"+i+", score:"+s+", attempt:"+y+"}"),d.addEventToStore(g)}else l.instance.sendSdkErrorEvent(v.category,v.area,v.action,v.parameter,v.reason,r.getGameKey(),r.getGameSecret())}},d.addDesignEvent=function(e,t,n,o){if(r.isEventSubmissionEnabled()){var i=u.validateDesignEvent(e);if(null==i){var s={};s.category=d.CategoryDesign,s.event_id=e,n&&(s.value=t),d.addDimensionsToEvent(s),d.addFieldsToEvent(s,r.validateAndCleanCustomFields(o)),a.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),d.addEventToStore(s)}else l.instance.sendSdkErrorEvent(i.category,i.area,i.action,i.parameter,i.reason,r.getGameKey(),r.getGameSecret())}},d.addErrorEvent=function(e,t,n){if(r.isEventSubmissionEnabled()){var o=d.errorSeverityToString(e),i=u.validateErrorEvent(e,t);if(null==i){var s={};s.category=d.CategoryError,s.severity=o,s.message=t,d.addDimensionsToEvent(s),d.addFieldsToEvent(s,r.validateAndCleanCustomFields(n)),a.i("Add ERROR event: {severity:"+o+", message:"+t+"}"),d.addEventToStore(s)}else l.instance.sendSdkErrorEvent(i.category,i.area,i.action,i.parameter,i.reason,r.getGameKey(),r.getGameSecret())}},d.addAdEvent=function(t,n,o,i,s,c,p,f){if(r.isEventSubmissionEnabled()){var v=d.adActionToString(t),h=d.adTypeToString(n),g=d.adErrorToString(s),y=u.validateAdEvent(t,n,o,i);if(null==y){var m={};m.category=d.CategoryAds,m.ad_sdk_name=o,m.ad_placement=i,m.ad_type=h,m.ad_action=v,t==e.EGAAdAction.FailedShow&&g.length>0&&(m.ad_fail_show_reason=g),!p||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video||(m.ad_duration=c),d.addDimensionsToEvent(m),d.addFieldsToEvent(m,r.validateAndCleanCustomFields(f)),a.i("Add AD event: {ad_sdk_name:"+o+", ad_placement:"+i+", ad_type:"+h+", ad_action:"+v+(t==e.EGAAdAction.FailedShow&&g.length>0?", ad_fail_show_reason:"+g:"")+(!p||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video?"":", ad_duration:"+c)+"}"),d.addEventToStore(m)}else l.instance.sendSdkErrorEvent(y.category,y.area,y.action,y.parameter,y.reason,r.getGameKey(),r.getGameSecret())}},d.processEvents=function(e,c){if(r.isEventSubmissionEnabled())try{var p=s.createGuid();c&&(d.cleanupEvents(),d.fixMissingSessionEndEvents());var f=[];f.push(["status",i.Equal,"new"]);var v=[];v.push(["status",i.Equal,"new"]),e&&(f.push(["category",i.Equal,e]),v.push(["category",i.Equal,e]));var h=[];h.push(["status",p]);var g=n.select(o.Events,f);if(!g||0==g.length)return a.i("Event queue: No events to send"),void d.updateSessionStore();if(g.length>d.MaxEventCount){if(!(g=n.select(o.Events,f,!0,d.MaxEventCount)))return;var y=g[g.length-1].client_ts;if(f.push(["client_ts",i.LessOrEqual,y]),!(g=n.select(o.Events,f)))return;v.push(["client_ts",i.LessOrEqual,y])}if(a.i("Event queue: Sending "+g.length+" events."),!n.update(o.Events,h,v))return;for(var m=[],_=0;_<g.length;++_){var E=g[_],A=JSON.parse(s.decode64(E.event));if(0!=A.length){var S=A.client_ts;S&&!u.validateClientTs(S)&&delete A.client_ts,m.push(A)}}l.instance.sendEventsInArray(m,p,d.processEventsCallback)}catch(b){a.e("Error during ProcessEvents(): "+b.stack),l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Json,t.EGASdkErrorArea.ProcessEvents,t.EGASdkErrorAction.JsonError,t.EGASdkErrorParameter.Undefined,b.stack,r.getGameKey(),r.getGameSecret())}},d.processEventsCallback=function(e,t,r,s){var l=[];if(l.push(["status",i.Equal,r]),e===c.Ok)n.delete(o.Events,l),a.i("Event queue: "+s+" events sent.");else if(e===c.NoResponse){var u=[];u.push(["status","new"]),a.w("Event queue: Failed to send events to collector - Retrying next time"),n.update(o.Events,u,l)}else{if(t){var d,p=0;for(var f in t)0==p&&(d=t[f]),++p;e===c.BadRequest&&d.constructor===Array?a.w("Event queue: "+s+" events sent. "+p+" events failed GA server validation."):a.w("Event queue: Failed to send events.")}else a.w("Event queue: Failed to send events.");n.delete(o.Events,l)}},d.cleanupEvents=function(){n.update(o.Events,[["status","new"]])},d.fixMissingSessionEndEvents=function(){if(r.isEventSubmissionEnabled()){var e=[];e.push(["session_id",i.NotEqual,r.getSessionId()]);var t=n.select(o.Sessions,e);if(t&&0!=t.length){a.i(t.length+" session(s) located with missing session_end event.");for(var c=0;c<t.length;++c){var l=JSON.parse(s.decode64(t[c].event)),u=l.client_ts-t[c].timestamp;u=Math.max(0,u),l.category=d.CategorySessionEnd,l.length=u,d.addEventToStore(l)}}}},d.addEventToStore=function(e){if(r.isEventSubmissionEnabled())if(r.isInitialized())try{if(n.isStoreTooLargeForEvents()&&!s.stringMatch(e.category,/^(user|session_end|business)$/))return a.w("Database too large. Event has been blocked."),void l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,"",r.getGameKey(),r.getGameSecret());var c=r.getEventAnnotations(),u=s.encode64(JSON.stringify(c));for(var p in e)c[p]=e[p];var f=JSON.stringify(c);a.ii("Event added to queue: "+f);var v={status:"new"};v.category=c.category,v.session_id=c.session_id,v.client_ts=c.client_ts,v.event=s.encode64(JSON.stringify(c)),n.insert(o.Events,v),e.category==d.CategorySessionEnd?n.delete(o.Sessions,[["session_id",i.Equal,c.session_id]]):((v={}).session_id=c.session_id,v.timestamp=r.getSessionStart(),v.event=u,n.insert(o.Sessions,v,!0,"session_id")),n.isStorageAvailable()&&n.save(r.getGameKey())}catch(p){a.e("addEventToStore: error"),a.e(p.stack),l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,p.stack,r.getGameKey(),r.getGameSecret())}else a.w("Could not add event: SDK is not initialized")},d.updateSessionStore=function(){if(r.sessionIsStarted()){var e={};e.session_id=r.instance.sessionId,e.timestamp=r.getSessionStart(),e.event=s.encode64(JSON.stringify(r.getEventAnnotations())),n.insert(o.Sessions,e,!0,"session_id"),n.isStorageAvailable()&&n.save(r.getGameKey())}},d.addDimensionsToEvent=function(e){e&&(r.getCurrentCustomDimension01()&&(e.custom_01=r.getCurrentCustomDimension01()),r.getCurrentCustomDimension02()&&(e.custom_02=r.getCurrentCustomDimension02()),r.getCurrentCustomDimension03()&&(e.custom_03=r.getCurrentCustomDimension03()))},d.addFieldsToEvent=function(e,t){e&&t&&Object.keys(t).length>0&&(e.custom_fields=t)},d.resourceFlowTypeToString=function(t){return t==e.EGAResourceFlowType.Source||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":t==e.EGAResourceFlowType.Sink||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},d.progressionStatusToString=function(t){return t==e.EGAProgressionStatus.Start||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":t==e.EGAProgressionStatus.Complete||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":t==e.EGAProgressionStatus.Fail||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},d.errorSeverityToString=function(t){return t==e.EGAErrorSeverity.Debug||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":t==e.EGAErrorSeverity.Info||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":t==e.EGAErrorSeverity.Warning||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":t==e.EGAErrorSeverity.Error||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":t==e.EGAErrorSeverity.Critical||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},d.adActionToString=function(t){return t==e.EGAAdAction.Clicked||t==e.EGAAdAction[e.EGAAdAction.Clicked]?"clicked":t==e.EGAAdAction.Show||t==e.EGAAdAction[e.EGAAdAction.Show]?"show":t==e.EGAAdAction.FailedShow||t==e.EGAAdAction[e.EGAAdAction.FailedShow]?"failed_show":t==e.EGAAdAction.RewardReceived||t==e.EGAAdAction[e.EGAAdAction.RewardReceived]?"reward_received":""},d.adErrorToString=function(t){return t==e.EGAAdError.Unknown||t==e.EGAAdError[e.EGAAdError.Unknown]?"unknown":t==e.EGAAdError.Offline||t==e.EGAAdError[e.EGAAdError.Offline]?"offline":t==e.EGAAdError.NoFill||t==e.EGAAdError[e.EGAAdError.NoFill]?"no_fill":t==e.EGAAdError.InternalError||t==e.EGAAdError[e.EGAAdError.InternalError]?"internal_error":t==e.EGAAdError.InvalidRequest||t==e.EGAAdError[e.EGAAdError.InvalidRequest]?"invalid_request":t==e.EGAAdError.UnableToPrecache||t==e.EGAAdError[e.EGAAdError.UnableToPrecache]?"unable_to_precache":""},d.adTypeToString=function(t){return t==e.EGAAdType.Video||t==e.EGAAdType[e.EGAAdType.Video]?"video":t==e.EGAAdType.RewardedVideo||t==e.EGAAdError[e.EGAAdType.RewardedVideo]?"rewarded_video":t==e.EGAAdType.Playable||t==e.EGAAdError[e.EGAAdType.Playable]?"playable":t==e.EGAAdType.Interstitial||t==e.EGAAdError[e.EGAAdType.Interstitial]?"interstitial":t==e.EGAAdType.OfferWall||t==e.EGAAdError[e.EGAAdType.OfferWall]?"offer_wall":t==e.EGAAdType.Banner||t==e.EGAAdError[e.EGAAdType.Banner]?"banner":""},d.CategorySessionStart="user",d.CategorySessionEnd="session_end",d.CategoryDesign="design",d.CategoryBusiness="business",d.CategoryProgression="progression",d.CategoryResource="resource",d.CategoryError="error",d.CategoryAds="ads",d.MaxEventCount=500,d}(),t.GAEvents=d}(i||(i={})),function(e){(function(t){var n=e.logging.GALogger,o=e.state.GAState,i=e.events.GAEvents,r=function(){function e(){this.blocks=new t.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var n=new Date;return n.setSeconds(n.getSeconds()+e),new t.TimedBlock(n)},e.performTaskOnGAThread=function(n,o){void 0===o&&(o=0);var i=new Date;i.setSeconds(i.getSeconds()+o);var r=new t.TimedBlock(i);r.block=n,e.instance.id2TimedBlockMap[r.id]=r,e.instance.addTimedBlock(r)},e.performTimedBlockOnGAThread=function(t){e.instance.id2TimedBlockMap[t.id]=t,e.instance.addTimedBlock(t)},e.scheduleTimer=function(n,o){var i=new Date;i.setSeconds(i.getSeconds()+n);var r=new t.TimedBlock(i);return r.block=o,e.instance.id2TimedBlockMap[r.id]=r,e.instance.addTimedBlock(r),r.id},e.getTimedBlockById=function(t){return t in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[t]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){o.isInitialized()&&(n.i("Ending session."),e.stopEventQueue(),o.isEnabled()&&o.sessionIsStarted()&&(i.addSessionEndEvent(),o.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(t){t in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[t].ignore=!0)},e.setEventProcessInterval=function(t){t>0&&(e.ProcessEventsIntervalInSeconds=t)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var t;t=e.getNextBlock();)if(!t.ignore)if(t.async){if(!t.running){t.running=!0,t.block();break}}else t.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(o){n.e("Error on GA thread"),n.e(o.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var t=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=t.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){i.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();t.GAThreading=r})(e.threading||(e.threading={}))}(i||(i={})),function(t){var n=t.threading.GAThreading,o=t.logging.GALogger,i=t.store.GAStore,r=t.state.GAState,a=t.http.GAHTTPApi,s=t.device.GADevice,c=t.validators.GAValidator,l=t.http.EGAHTTPApiResponse,u=t.utilities.GAUtilities,d=t.events.GAEvents,p=function(){function p(){}return p.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0},p.init=function(){if(s.touch(),p.methodMap.configureAvailableCustomDimensions01=p.configureAvailableCustomDimensions01,p.methodMap.configureAvailableCustomDimensions02=p.configureAvailableCustomDimensions02,p.methodMap.configureAvailableCustomDimensions03=p.configureAvailableCustomDimensions03,p.methodMap.configureAvailableResourceCurrencies=p.configureAvailableResourceCurrencies,p.methodMap.configureAvailableResourceItemTypes=p.configureAvailableResourceItemTypes,p.methodMap.configureBuild=p.configureBuild,p.methodMap.configureSdkGameEngineVersion=p.configureSdkGameEngineVersion,p.methodMap.configureGameEngineVersion=p.configureGameEngineVersion,p.methodMap.configureUserId=p.configureUserId,p.methodMap.initialize=p.initialize,p.methodMap.addBusinessEvent=p.addBusinessEvent,p.methodMap.addResourceEvent=p.addResourceEvent,p.methodMap.addProgressionEvent=p.addProgressionEvent,p.methodMap.addDesignEvent=p.addDesignEvent,p.methodMap.addErrorEvent=p.addErrorEvent,p.methodMap.addAdEvent=p.addAdEvent,p.methodMap.setEnabledInfoLog=p.setEnabledInfoLog,p.methodMap.setEnabledVerboseLog=p.setEnabledVerboseLog,p.methodMap.setEnabledManualSessionHandling=p.setEnabledManualSessionHandling,p.methodMap.setEnabledEventSubmission=p.setEnabledEventSubmission,p.methodMap.setCustomDimension01=p.setCustomDimension01,p.methodMap.setCustomDimension02=p.setCustomDimension02,p.methodMap.setCustomDimension03=p.setCustomDimension03,p.methodMap.setEventProcessInterval=p.setEventProcessInterval,p.methodMap.startSession=p.startSession,p.methodMap.endSession=p.endSession,p.methodMap.onStop=p.onStop,p.methodMap.onResume=p.onResume,p.methodMap.addRemoteConfigsListener=p.addRemoteConfigsListener,p.methodMap.removeRemoteConfigsListener=p.removeRemoteConfigsListener,p.methodMap.getRemoteConfigsValueAsString=p.getRemoteConfigsValueAsString,p.methodMap.isRemoteConfigsReady=p.isRemoteConfigsReady,p.methodMap.getRemoteConfigsContentAsString=p.getRemoteConfigsContentAsString,p.methodMap.addOnBeforeUnloadListener=p.addOnBeforeUnloadListener,p.methodMap.removeOnBeforeUnloadListener=p.removeOnBeforeUnloadListener,void 0!==p.getGlobalObject()&&void 0!==p.getGlobalObject().GameAnalytics&&void 0!==p.getGlobalObject().GameAnalytics.q){var e=p.getGlobalObject().GameAnalytics.q;for(var t in e)p.gaCommand.apply(null,e[t])}window.addEventListener("beforeunload",function(){console.log("addEventListener unload"),r.instance.isUnloading=!0,r.notifyBeforeUnloadListeners(),n.endSessionAndStopQueue(),r.instance.isUnloading=!1})},p.gaCommand=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length>0&&e[0]in t.GameAnalytics.methodMap&&(e.length>1?t.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):t.GameAnalytics.methodMap[e[0]]())},p.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions01(e)})},p.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions02(e)})},p.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions03(e)})},p.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available resource currencies must be set before SDK is initialized"):r.setAvailableResourceCurrencies(e)})},p.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Available resource item types must be set before SDK is initialized"):r.setAvailableResourceItemTypes(e)})},p.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("Build version must be set before SDK is initialized."):c.validateBuild(e)?r.setBuild(e):o.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},p.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)||(c.validateSdkWrapperVersion(e)?s.sdkGameEngineVersion=e:o.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},p.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)||(c.validateEngineVersion(e)?s.gameEngineVersion=e:o.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},p.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){p.isSdkReady(!0,!1)?o.w("A custom user id must be set before SDK is initialized."):c.validateUserId(e)?r.setUserId(e):o.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},p.initialize=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),s.updateConnectionType();var i=n.createTimedBlock();i.async=!0,p.initTimedBlockId=i.id,i.block=function(){p.isSdkReady(!0,!1)?o.w("SDK already initialized. Can only be called once."):c.validateKeys(e,t)?(r.setKeys(e,t),p.internalInitialize()):o.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+t)},n.performTimedBlockOnGAThread(i)},p.addBusinessEvent=function(e,t,o,i,a){if(void 0===e&&(e=""),void 0===t&&(t=0),void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a=""),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add business event"))return;d.addBusinessEvent(e,t,o,i,a,{})}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add business event")&&d.addBusinessEvent(e,t,o,i,a,{})})},p.addResourceEvent=function(e,o,i,a,c){if(void 0===e&&(e=t.EGAResourceFlowType.Undefined),void 0===o&&(o=""),void 0===i&&(i=0),void 0===a&&(a=""),void 0===c&&(c=""),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add resource event"))return;d.addResourceEvent(e,o,i,a,c,{})}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add resource event")&&d.addResourceEvent(e,o,i,a,c,{})})},p.addProgressionEvent=function(e,o,i,a,c){if(void 0===e&&(e=t.EGAProgressionStatus.Undefined),void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a=""),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add progression event"))return;var l="number"==typeof c;d.addProgressionEvent(e,o,i,a,l?c:0,l,{})}else n.performTaskOnGAThread(function(){if(p.isSdkReady(!0,!0,"Could not add progression event")){var t="number"==typeof c;d.addProgressionEvent(e,o,i,a,t?c:0,t,{})}})},p.addDesignEvent=function(e,t){if(s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add design event"))return;var o="number"==typeof t;d.addDesignEvent(e,o?t:0,o,{})}else n.performTaskOnGAThread(function(){if(p.isSdkReady(!0,!0,"Could not add design event")){var n="number"==typeof t;d.addDesignEvent(e,n?t:0,n,{})}})},p.addErrorEvent=function(e,o){if(void 0===e&&(e=t.EGAErrorSeverity.Undefined),void 0===o&&(o=""),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add error event"))return;d.addErrorEvent(e,o,{})}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add error event")&&d.addErrorEvent(e,o,{})})},p.addAdEventWithNoAdReason=function(e,o,i,a,c){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===o&&(o=t.EGAAdType.Undefined),void 0===i&&(i=""),void 0===a&&(a=""),void 0===c&&(c=t.EGAAdError.Undefined),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,o,i,a,c,0,!1,{})}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,o,i,a,c,0,!1,{})})},p.addAdEventWithDuration=function(e,o,i,a,c){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===o&&(o=t.EGAAdType.Undefined),void 0===i&&(i=""),void 0===a&&(a=""),void 0===c&&(c=0),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,c,!0,{})}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,c,!0,{})})},p.addAdEvent=function(e,o,i,a){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===o&&(o=t.EGAAdType.Undefined),void 0===i&&(i=""),void 0===a&&(a=""),s.updateConnectionType(),r.instance.isUnloading){if(!p.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,0,!1,{})}else n.performTaskOnGAThread(function(){p.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,o,i,a,t.EGAAdError.Undefined,0,!1,{})})},p.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(o.setInfoLog(e),o.i("Info logging enabled")):(o.i("Info logging disabled"),o.setInfoLog(e))})},p.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(o.setVerboseLog(e),o.i("Verbose logging enabled")):(o.i("Verbose logging disabled"),o.setVerboseLog(e))})},p.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){r.setManualSessionHandling(e)})},p.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(r.setEnabledEventSubmission(e),o.i("Event submission enabled")):(o.i("Event submission disabled"),r.setEnabledEventSubmission(e))})},p.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension01(e,r.getAvailableCustomDimensions01())?r.setCustomDimension01(e):o.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},p.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension02(e,r.getAvailableCustomDimensions02())?r.setCustomDimension02(e):o.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},p.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension03(e,r.getAvailableCustomDimensions03())?r.setCustomDimension03(e):o.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},p.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},p.startSession=function(){if(r.isInitialized()){var e=n.createTimedBlock();e.async=!0,p.initTimedBlockId=e.id,e.block=function(){r.isEnabled()&&r.sessionIsStarted()&&n.endSessionAndStopQueue(),p.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},p.endSession=function(){p.onStop()},p.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},p.onResume=function(){var e=n.createTimedBlock();e.async=!0,p.initTimedBlockId=e.id,e.block=function(){p.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},p.getRemoteConfigsValueAsString=function(e,t){return void 0===t&&(t=null),r.getConfigurationStringValue(e,t)},p.isRemoteConfigsReady=function(){return r.isRemoteConfigsReady()},p.addRemoteConfigsListener=function(e){r.addRemoteConfigsListener(e)},p.removeRemoteConfigsListener=function(e){r.removeRemoteConfigsListener(e)},p.getRemoteConfigsContentAsString=function(){return r.getRemoteConfigsContentAsString()},p.getABTestingId=function(){return r.getABTestingId()},p.getABTestingVariantId=function(){return r.getABTestingVariantId()},p.addOnBeforeUnloadListener=function(e){r.addOnBeforeUnloadListener(e)},p.removeOnBeforeUnloadListener=function(e){r.removeOnBeforeUnloadListener(e)},p.internalInitialize=function(){r.ensurePersistedStates(),i.setItem(r.getGameKey(),r.DefaultUserIdKey,r.getDefaultId()),r.setInitialized(!0),p.newSession(),r.isEnabled()&&n.ensureEventQueueIsRunning()},p.newSession=function(){o.i("Starting a new session."),r.validateAndFixCurrentDimensions(),a.instance.requestInit(r.instance.configsHash,p.startNewSessionCallback)},p.startNewSessionCallback=function(e,t){if(e!==l.Ok&&e!==l.Created||!t)e==l.Unauthorized?(o.w("Initialize SDK failed - Unauthorized"),r.instance.initAuthorized=!1):(e===l.NoResponse||e===l.RequestTimeout?o.i("Init call (session start) failed - no response. Could be offline or timeout."):e===l.BadResponse||e===l.JsonEncodeFailed||e===l.JsonDecodeFailed?o.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==l.BadRequest&&e!==l.UnknownResponseCode||o.i("Init call (session start) failed - bad request or unknown response."),null==r.instance.sdkConfig?null!=r.instance.sdkConfigCached?(o.i("Init call (session start) failed - using cached init values."),r.instance.sdkConfig=r.instance.sdkConfigCached):(o.i("Init call (session start) failed - using default init values."),r.instance.sdkConfig=r.instance.sdkConfigDefault):o.i("Init call (session start) failed - using cached init values."),r.instance.initAuthorized=!0);else{var a=0;if(t.server_ts){var s=t.server_ts;a=r.calculateServerTimeOffset(s)}if(t.time_offset=a,e!=l.Created){var c=r.getSdkConfig();c.configs&&(t.configs=c.configs),c.configs_hash&&(t.configs_hash=c.configs_hash),c.ab_id&&(t.ab_id=c.ab_id),c.ab_variant_id&&(t.ab_variant_id=c.ab_variant_id)}r.instance.configsHash=t.configs_hash?t.configs_hash:"",r.instance.abId=t.ab_id?t.ab_id:"",r.instance.abVariantId=t.ab_variant_id?t.ab_variant_id:"",i.setItem(r.getGameKey(),r.SdkConfigCachedKey,u.encode64(JSON.stringify(t))),r.instance.sdkConfigCached=t,r.instance.sdkConfig=t,r.instance.initAuthorized=!0}if(r.instance.clientServerTimeOffset=r.getSdkConfig().time_offset?r.getSdkConfig().time_offset:0,r.populateConfigurations(r.getSdkConfig()),!r.isEnabled())return o.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var f=u.createGuid();r.instance.sessionId=f,r.instance.sessionStart=r.getClientTsAdjusted(),d.addSessionStartEvent();var v=n.getTimedBlockById(p.initTimedBlockId);null!=v&&(v.running=!1),p.initTimedBlockId=-1},p.resumeSessionAndStartQueue=function(){r.isInitialized()&&(o.i("Resuming session."),r.sessionIsStarted()||p.newSession())},p.isSdkReady=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=""),n&&(n+=": "),e&&!r.isInitialized()?(t&&o.w(n+"SDK is not initialized"),!1):e&&!r.isEnabled()?(t&&o.w(n+"SDK is disabled"),!1):!(e&&!r.sessionIsStarted()&&(t&&o.w(n+"Session has not started yet"),1))},p.initTimedBlockId=-1,p.methodMap={},p}();t.GameAnalytics=p}(i||(i={})),i.GameAnalytics.init(),i.GameAnalytics.gaCommand,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return d.default}});var o=p(e("./v1.js")),i=p(e("./v3.js")),r=p(e("./v4.js")),a=p(e("./v5.js")),s=p(e("./nil.js")),c=p(e("./version.js")),l=p(e("./validate.js")),u=p(e("./stringify.js")),d=p(e("./parse.js"));function p(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":4,"./parse.js":5,"./stringify.js":9,"./v1.js":10,"./v3.js":11,"./v4.js":13,"./v5.js":14,"./validate.js":15,"./version.js":16}],3:[function(e,t,n){"use strict";function o(e){const t=[],n=32*e.length;for(let o=0;o<n;o+=8){const n=e[o>>5]>>>o%32&255,i=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(i)}return t}function i(e){return 15+(e+64>>>9<<4)}function r(e,t){e[t>>5]|=128<<t%32,e[i(t)-1]=t;let n=1732584193,o=-271733879,r=-1732584194,a=271733878;for(let i=0;i<e.length;i+=16){const t=n,c=o,f=r,v=a;n=l(n,o,r,a,e[i],7,-680876936),a=l(a,n,o,r,e[i+1],12,-389564586),r=l(r,a,n,o,e[i+2],17,606105819),o=l(o,r,a,n,e[i+3],22,-1044525330),n=l(n,o,r,a,e[i+4],7,-176418897),a=l(a,n,o,r,e[i+5],12,1200080426),r=l(r,a,n,o,e[i+6],17,-1473231341),o=l(o,r,a,n,e[i+7],22,-45705983),n=l(n,o,r,a,e[i+8],7,1770035416),a=l(a,n,o,r,e[i+9],12,-1958414417),r=l(r,a,n,o,e[i+10],17,-42063),o=l(o,r,a,n,e[i+11],22,-1990404162),n=l(n,o,r,a,e[i+12],7,1804603682),a=l(a,n,o,r,e[i+13],12,-40341101),r=l(r,a,n,o,e[i+14],17,-1502002290),n=u(n,o=l(o,r,a,n,e[i+15],22,1236535329),r,a,e[i+1],5,-165796510),a=u(a,n,o,r,e[i+6],9,-1069501632),r=u(r,a,n,o,e[i+11],14,643717713),o=u(o,r,a,n,e[i],20,-373897302),n=u(n,o,r,a,e[i+5],5,-701558691),a=u(a,n,o,r,e[i+10],9,38016083),r=u(r,a,n,o,e[i+15],14,-660478335),o=u(o,r,a,n,e[i+4],20,-405537848),n=u(n,o,r,a,e[i+9],5,568446438),a=u(a,n,o,r,e[i+14],9,-1019803690),r=u(r,a,n,o,e[i+3],14,-187363961),o=u(o,r,a,n,e[i+8],20,1163531501),n=u(n,o,r,a,e[i+13],5,-1444681467),a=u(a,n,o,r,e[i+2],9,-51403784),r=u(r,a,n,o,e[i+7],14,1735328473),n=d(n,o=u(o,r,a,n,e[i+12],20,-1926607734),r,a,e[i+5],4,-378558),a=d(a,n,o,r,e[i+8],11,-2022574463),r=d(r,a,n,o,e[i+11],16,1839030562),o=d(o,r,a,n,e[i+14],23,-35309556),n=d(n,o,r,a,e[i+1],4,-1530992060),a=d(a,n,o,r,e[i+4],11,1272893353),r=d(r,a,n,o,e[i+7],16,-155497632),o=d(o,r,a,n,e[i+10],23,-1094730640),n=d(n,o,r,a,e[i+13],4,681279174),a=d(a,n,o,r,e[i],11,-358537222),r=d(r,a,n,o,e[i+3],16,-722521979),o=d(o,r,a,n,e[i+6],23,76029189),n=d(n,o,r,a,e[i+9],4,-640364487),a=d(a,n,o,r,e[i+12],11,-421815835),r=d(r,a,n,o,e[i+15],16,530742520),n=p(n,o=d(o,r,a,n,e[i+2],23,-995338651),r,a,e[i],6,-198630844),a=p(a,n,o,r,e[i+7],10,1126891415),r=p(r,a,n,o,e[i+14],15,-1416354905),o=p(o,r,a,n,e[i+5],21,-57434055),n=p(n,o,r,a,e[i+12],6,1700485571),a=p(a,n,o,r,e[i+3],10,-1894986606),r=p(r,a,n,o,e[i+10],15,-1051523),o=p(o,r,a,n,e[i+1],21,-2054922799),n=p(n,o,r,a,e[i+8],6,1873313359),a=p(a,n,o,r,e[i+15],10,-30611744),r=p(r,a,n,o,e[i+6],15,-1560198380),o=p(o,r,a,n,e[i+13],21,1309151649),n=p(n,o,r,a,e[i+4],6,-145523070),a=p(a,n,o,r,e[i+11],10,-1120210379),r=p(r,a,n,o,e[i+2],15,718787259),o=p(o,r,a,n,e[i+9],21,-343485551),n=s(n,t),o=s(o,c),r=s(r,f),a=s(a,v)}return[n,o,r,a]}function a(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(i(t));for(let o=0;o<t;o+=8)n[o>>5]|=(255&e[o/8])<<o%32;return n}function s(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t,n,o,i,r){return s((a=s(s(t,e),s(o,r)))<<(c=i)|a>>>32-c,n);var a,c}function l(e,t,n,o,i,r,a){return c(t&n|~t&o,e,t,i,r,a)}function u(e,t,n,o,i,r,a){return c(t&o|n&~o,e,t,i,r,a)}function d(e,t,n,o,i,r,a){return c(t^n^o,e,t,i,r,a)}function p(e,t,n,o,i,r,a){return c(n^(t|~o),e,t,i,r,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return o(r(a(e),8*e.length))}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default="00000000-0000-0000-0000-000000000000"},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=e("./validate.js"))&&o.__esModule?o:{default:o};n.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},{"./validate.js":15}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],7:[function(e,t,n){"use strict";let o;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)};const i=new Uint8Array(16)},{}],8:[function(e,t,n){"use strict";function o(e,t,n,o){switch(e){case 0:return t&n^~t&o;case 1:return t^n^o;case 2:return t&n^t&o^n&o;case 3:return t^n^o}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,a=Math.ceil(r/16),s=new Array(a);for(let o=0;o<a;++o){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=e[64*o+4*n]<<24|e[64*o+4*n+1]<<16|e[64*o+4*n+2]<<8|e[64*o+4*n+3];s[o]=t}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<a;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[c][t];for(let t=16;t<80;++t)e[t]=i(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let r=n[0],a=n[1],l=n[2],u=n[3],d=n[4];for(let n=0;n<80;++n){const s=Math.floor(n/20),c=i(r,5)+o(s,a,l,u)+d+t[s]+e[n]>>>0;d=u,u=l,l=i(a,30)>>>0,a=r,r=c}n[0]=n[0]+r>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=e("./validate.js"))&&o.__esModule?o:{default:o};const r=[];for(let a=0;a<256;++a)r.push((a+256).toString(16).substr(1));n.default=function(e,t=0){const n=(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase();if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n}},{"./validate.js":15}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./rng.js")),i=r(e("./stringify.js"));function r(e){return e&&e.__esModule?e:{default:e}}let a,s,c=0,l=0;n.default=function(e,t,n){let r=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==p){const t=e.random||(e.rng||o.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=s=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:l+1;const h=f-c+(v-l)/1e4;if(h<0&&void 0===e.clockseq&&(p=p+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=v,s=p;const g=(1e4*(268435455&(f+=122192928e5))+v)%4294967296;u[r++]=g>>>24&255,u[r++]=g>>>16&255,u[r++]=g>>>8&255,u[r++]=255&g;const y=f/4294967296*1e4&268435455;u[r++]=y>>>8&255,u[r++]=255&y,u[r++]=y>>>24&15|16,u[r++]=y>>>16&255,u[r++]=p>>>8|128,u[r++]=255&p;for(let o=0;o<6;++o)u[r+o]=d[o];return t||(0,i.default)(u)}},{"./rng.js":7,"./stringify.js":9}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./v35.js")),i=r(e("./md5.js"));function r(e){return e&&e.__esModule?e:{default:e}}var a=(0,o.default)("v3",48,i.default);n.default=a},{"./md5.js":3,"./v35.js":12}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){function r(e,r,s,c){if("string"==typeof e&&(e=a(e)),"string"==typeof r&&(r=(0,i.default)(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=n(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,s){c=c||0;for(let e=0;e<16;++e)s[c+e]=l[e];return s}return(0,o.default)(l)}try{r.name=e}catch(l){}return r.DNS=s,r.URL=c,r},n.URL=n.DNS=void 0;var o=r(e("./stringify.js")),i=r(e("./parse.js"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=s;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=c},{"./parse.js":5,"./stringify.js":9}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./rng.js")),i=r(e("./stringify.js"));function r(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t,n){const r=(e=e||{}).random||(e.rng||o.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return(0,i.default)(r)}},{"./rng.js":7,"./stringify.js":9}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./v35.js")),i=r(e("./sha1.js"));function r(e){return e&&e.__esModule?e:{default:e}}var a=(0,o.default)("v5",80,i.default);n.default=a},{"./sha1.js":8,"./v35.js":12}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=e("./regex.js"))&&o.__esModule?o:{default:o};n.default=function(e){return"string"==typeof e&&i.default.test(e)}},{"./regex.js":6}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=e("./validate.js"))&&o.__esModule?o:{default:o};n.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":15}],Data:[function(e,t,n){"use strict";cc._RF.push(t,"3d849M56chKpq7we06ouPH6","Data");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.getKeyData=n.KEY=void 0;var r,a=e("./FBInstantManager"),s=e("./TiniController"),c=cc._decorator,l=c.ccclass;c.property,function(e){e.LOCAL="troll_master_local_data",e.FACEBOOK="troll_master_facebook_data",e.TINI="troll_master_tini_data"}(r=n.KEY||(n.KEY={})),n.getKeyData=function(){return s.default.getInstance().isHasTiniApp()?r.TINI:r.LOCAL};var u=function(e){return e},d={unlock:0,isMusic:!0,isSound:!0,isVibrate:!0,pencil:0,pencils:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],firstPlay:null},p=function(){function e(){}var t;return t=e,e.saveData=function(e,n,o){void 0===o&&(o=null),e==r.FACEBOOK?a.default.getInstance().setPlayerData(n,function(e){e&&console.error(e),t.saveData(r.LOCAL,n),o&&o()}):e==r.TINI?s.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"userData",data:n}},function(){o&&o()}):e==r.LOCAL&&(cc.sys.localStorage.setItem(r.LOCAL,JSON.stringify(n)),o&&o())},e.getData=function(e,t){if(void 0===t&&(t=null),e==r.LOCAL){var n=JSON.parse(cc.sys.localStorage.getItem(r.LOCAL));return n?t&&t(n):t&&t(d)}e==r.FACEBOOK?this.getDataFacebook(t):e==r.TINI&&s.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"userData"}},function(e){console.log("Get data user",e.res.data),t&&t(o(o({},d),e.res.data))})},e.removeData=function(e){cc.sys.localStorage.removeItem(e)},e.getDataFacebook=function(e){void 0===e&&(e=null),a.default.getInstance().getPlayerData(function(n,i){if(n){console.log("get facebook data err",n);var a=cc.sys.localStorage.getItem(r.LOCAL);return e(null,a?u(JSON.parse(a)):o({},d))}return i?e&&e(n,o(o({},d),i)):t.getData(r.LOCAL,function(t,n){e(t,o(o({},d),n))})})},t=i([l],e)}();n.default=p,cc._RF.pop()},{"./FBInstantManager":"FBInstantManager","./TiniController":"TiniController"}],Draw:[function(e,t,n){"use strict";cc._RF.push(t,"d4b35m2fZRCbbKoFx0bRUKN","Draw");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touch=null,t._valid=!1,t._data=null,t._touch=null,t}return i(t,e),t.prototype.onEnable=function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this._touch=this.node.parent.getComponent("LevelController").touch},t.prototype.start=function(){this._graphic=this.node.getComponent(cc.Graphics)},t.prototype.onTouchStart=function(e){this._touch.onTouchStart(),this._pos=this.node.convertToNodeSpaceAR(e.getLocation()),this.node.parent.getChildByName("Pen").position=this._pos,this.touch.node.position=this._pos;var t=new cc.Event.EventCustom("draw_start",!0);this.node.dispatchEvent(t)},t.prototype.onTouchMove=function(e){var t=this.node.parent.getChildByName("Pen");this._pos=this.node.convertToNodeSpaceAR(e.getLocation()),t.position=this._pos,this.touch.node.position=this._pos,this._graphic.lineTo(this._pos.x,this._pos.y),this._graphic.stroke(),this._graphic.moveTo(this._pos.x,this._pos.y)},t.prototype.onTouchEnd=function(){this._touch.onTouchEnd();var e=new cc.Event.EventCustom("draw_complete",!0);this.node.dispatchEvent(e),this._graphic.clear()},r([c(cc.CircleCollider)],t.prototype,"touch",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],EffectManager:[function(e,t,n){"use strict";cc._RF.push(t,"a8056SReCpG9IT2jQR8QEio","EffectManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,cc.tween),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.hideScene=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=cc.find("Canvas/Shadow");n&&e&&c(n).to(.4,{opacity:255}).call(function(){e(t)}.bind(this)).start()},t.showScene=function(e){void 0===e&&(e=null);var t=cc.find("Canvas/Shadow");t&&c(t).to(.4,{opacity:0}).start()},t.effectFail=function(){var e=cc.find("Canvas/Shadow"),t=cc.find("Canvas/Fail");e&&t&&(c(e).to(.2,{opacity:150},{easing:"cubicOut"}).start(),c(t).to(.2,{scale:1,opacity:255},{easing:"cubicOut"}).start())},t.effectSuccess=function(){var e=cc.find("Canvas/Shadow"),t=cc.find("Canvas/Success");e&&t&&(c(e).to(.2,{opacity:150},{easing:"cubicOut"}).start(),c(t).to(.2,{scale:.7,opacity:255},{easing:"cubicOut"}).start())},t.effectScaleOption=function(e,t){e.active=!0,e.scale=0,c(e).to(t,{scale:1,opacity:255},{easing:"backOut"}).start()},t.effectHideButton=function(e,t){c(e).to(t,{scale:0,opacity:0},{easing:"backOut"}).start()},t.showUI=function(e){cc.find("Canvas/Level").active=e,cc.find("Canvas/OptionContainer").active=e},t.flicker=function(e,t){c(e).repeat(t,c().to(.05,{opacity:0}).delay(.1).to(.05,{opacity:255})).start()},t.showTick=function(e,t){void 0===t&&(t=null),t?t.getChildByName("TrueAnswer").active=!0:cc.find("Canvas/Level/Line/TrueAnswer").active=!0;var n=cc.find("Canvas/OptionContainer").getChildByName("option"+(e+1));switch(e){case 0:case 1:n.getChildByName("tick").active=!0;break;case 2:n.getChildByName("tick").active=!0}},t.showX=function(e,t){void 0===t&&(t=null),t?t.getChildByName("FalseAnswer").active=!0:cc.find("Canvas/Level/Line/FalseAnswer").active=!0;var n=cc.find("Canvas/OptionContainer").getChildByName("option"+(e+1));switch(e){case 0:case 1:n.getChildByName("x").active=!0;break;case 2:n.getChildByName("x").active=!0}},t.showButton=function(e,t){e.active=!0,e.scale=0,e.opacity=0,c(e).to(t,{scale:1,opacity:255},{easing:"quadIn"}).start()},t.scaleForever=function(e,t,n,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),t&&n&&o?(e.active=!0,e.scale=1,e.opacity=0,c(e).to(o,{scale:n,opacity:255}).repeatForever(c().to(o,{scale:t}).to(o,{scale:n})).start()):cc.Tween.stopAllByTarget(e)},t.effectScaleStart=function(e){e.active=!0,c(e).to(.25,{scale:.95},{easing:"backOut"}).repeatForever(c().to(.8,{scale:.95},{easing:"backOut"}).delay(.4).to(.8,{scale:1.05},{easing:"backOut"}).delay(.4)).start()},t.effectScaleButton=function(e,t,n,o){e.active=!0,e.opacity=255,c(e).parallel(c().to(o,{scaleX:t+.1},{easing:"cubicOut"}).to(.3,{scaleX:t}),c().to(o,{scaleY:n+.1},{easing:"cubicOut"}).to(.3,{scaleY:n})).start()},r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],FBInstantManager:[function(e,t,n){"use strict";cc._RF.push(t,"1b6b3fz3WpOkadxqiGeGl30","FBInstantManager");var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){this.shareImg="",this.playerId="",this.supportedApis=null}var t;return t=e,e.getInstance=function(){return t.instance||(t.instance=new t),t.instance},e.prototype.checkSupportedApis=function(e){if(!this.supportedApis)try{this.supportedApis=FBInstant.getSupportedAPIs()}catch(i){this.supportedApis=[]}for(var t=0,n=e;t<n.length;t++){var o=n[t];if(!this.supportedApis.includes(o))return!1}return!0},e.prototype.getPlayerId=function(){if(!this.playerId)try{this.playerId=FBInstant.player.getID()}catch(e){this.playerId="localId"}if(this.playerId)return this.playerId},e.prototype.getShareImg=function(e){var t=this;if(this.shareImg)return e(this.shareImg);cc.resources.load("Base64/ShareImg",function(n,o){t.shareImg=o.text,e(t.shareImg)})},e.prototype.canShareGame=function(){return this.checkSupportedApis(["shareAsync"])},e.prototype.shareGame=function(){this.getShareImg(function(e){var t=FBInstant.player.getID();FBInstant.shareAsync({intent:"REQUEST",image:e,text:"Let's play Troll master 2!",data:{sharePlayerID:t}})})},e.prototype.canShareGame=function(){return this.checkSupportedApis(["shareAsync"])},e.prototype.invitePlay=function(e){void 0===e&&(e={level:1,playerId:""});var t=function(t){FBInstant.getLeaderboardAsync(t).then(function(t){return t.setScoreAsync(e.level,"")}).then(function(){FBInstant.updateAsync({action:"LEADERBOARD",name:t,text:FBInstant.player.getName()+" had passed level "+e.level+" invite you to play Troll master 2"}).then(function(){cc.log("send invite - update leaderboard"),FBInstant.context.switchAsync("").then(function(){console.log("switch back context success",FBInstant.context.getType(),FBInstant.context.getID())}).catch(function(e){console.log("switch back context err",e)})}).catch(function(e){console.log("errr",e)})}).catch(function(e){console.log("err",e)})},n=FBInstant.context.chooseAsync,o=[];e.playerId&&(n=FBInstant.context.createAsync,o.push(e.playerId)),n.apply(void 0,o).then(function(){var e="HighScore."+FBInstant.context.getID();t(e)}).catch(function(e){void 0===e&&(e=null),console.log("fail?",e)})},e.prototype.canInvitePlay=function(){return this.checkSupportedApis(["getLeaderboardAsync","updateAsync","context.switchAsync","context.chooseAsync","context.createAsync"])},e.prototype.getConnectedPlayers=function(e){if(this.checkSupportedApis(["player.getConnectedPlayersAsync"]))try{FBInstant.player.getConnectedPlayersAsync().then(function(t){var n=t.map(function(e){return{id:e.getID(),name:e.getName(),photo:e.getPhoto()}});e(n)}).catch(function(e){console.log("get list fail",e)})}catch(t){cc.log("error:",t)}},e.prototype.setPlayerData=function(e,t){try{if(!FBInstant)return t(null)}catch(o){return t(null)}var n={};n.userData=e,FBInstant.player.setDataAsync(n).then(function(){t(null)}).catch(function(e){t(e)})},e.prototype.getPlayerData=function(e){try{if(!FBInstant)return e(null,null)}catch(t){return e(null,null)}FBInstant.player.getDataAsync(["userData"]).then(function(t){e(null,t.userData)}).catch(function(t){e(t,null)})},e.prototype.createShortcut=function(e){try{FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){console.log("--- create shortcut success"),e(!0)}).catch(function(){console.log("--- create shortcut fail"),e(!1)}),e(!1)})}catch(t){console.error(t),e(!1)}},e.prototype.getLocale=function(){return FBInstant.getLocale()},e.prototype.setSessionData=function(e){FBInstant.setSessionData(e)},e.prototype.subcribeBot=function(e){try{FBInstant.player.canSubscribeBotAsync().then(function(t){t?FBInstant.player.subscribeBotAsync().then(function(){console.log("--- subcribe bot success"),e(!0)}).catch(function(t){console.log("--- subcribe bot fail",t),e(!1)}):e(!1)}).catch(function(t){console.log("can not subcribe bot",t),e(!1)}).catch(function(e){console.log("can not subcribe bot",e)})}catch(t){console.log(t),e(!1)}},t=o([r],e)}());n.default=a,cc._RF.pop()},{}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"3486bV1LqtFNJesy/6vx5eV","GameManager");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.SOUND=n.TOTAL_LEVEL=n.GROUP=void 0;var a,s=e("./UIController"),c=e("./BundleManager"),l=e("./Data"),u=e("./Loading"),d=e("./UIController"),p=e("gameanalytics"),f=e("gameanalytics"),v=e("./Splash"),h=e("./TiniController"),g=cc._decorator,y=g.ccclass,m=g.property,_="1b166b637b04d93a8922769d05571cd0",E="cd805fdc82689f009767b188c00f15d5bd39cf45";(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE=1]="INSIDE",e[e.OUTSIDE=2]="OUTSIDE",e[e.TOUCH=3]="TOUCH"})(n.GROUP||(n.GROUP={})),n.TOTAL_LEVEL=250,function(e){e[e.BG=0]="BG",e[e.CLICK=1]="CLICK",e[e.DRAW=2]="DRAW",e[e.CORRECT=3]="CORRECT",e[e.CORRECT1=4]="CORRECT1",e[e.CORRECT2=5]="CORRECT2",e[e.WIN=6]="WIN",e[e.FALSE=7]="FALSE"}(a=n.SOUND||(n.SOUND={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setting=null,t.sounds=[],t.loading=null,t.star=null,t.item=null,t.incorrect=null,t.correct=null,t.guide=null,t.textGuide=null,t._itemPool=null,t._block=!1,t._current={level:null,node:null},t._loadLevel=null,t._list=null,t._setting=null,t._pencil=null,t.userTiki=null,t}var o;return i(t,e),o=t,t.getInstance=function(){return o._instacne||(o._instacne=this),o._instacne},t.prototype.onLoad=function(){this.loading.node.active=!0},t.prototype.onEnable=function(){this.node.on("onfinish",this.onFinish,this)},t.prototype.onFinish=function(){var e=this;this.scheduleOnce(function(){var t=o.userData;e._current.level==t.unlock+1&&t.unlock+1<n.TOTAL_LEVEL&&++o.userData.unlock,l.default.saveData(l.getKeyData(),t),s.default.getInstance().showUI(d.GroupUI.EndGame,!0),o.logPassed(t.unlock)},1)},t.prototype.start=function(){var e=this;o._instacne=this,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this._bundle=c.default.getInstance(),o.userData=v.default.userData,console.log(o.userData),this._loadLevel=o.userData.unlock+3,console.log("GAME VERSION: ","1.0.28"),this._itemPool=new cc.NodePool;for(var t=0;t<n.TOTAL_LEVEL;++t){var i=cc.instantiate(this.item);this._itemPool.put(i)}o.userData.isMusic&&this.playBG();var r=o.userData.unlock+1>=n.TOTAL_LEVEL?n.TOTAL_LEVEL-1:o.userData.unlock;for(this._bundle.getPrefabByName("Level"+(r+1),null,function(t,n){if(t)console.error(t);else{var i=cc.instantiate(n);if(e.node.addChild(i),e.checkFirstPlay()||0==o.userData.unlock){var r=cc.instantiate(e.guide);cc.find("Canvas").addChild(r),i.active=!1}}}),s.default.getInstance().showUI(d.GroupUI.InGame,!0),s.default.getInstance().showUI(d.GroupUI.EndGame,!1),this.loading.node.zIndex=cc.macro.MAX_ZINDEX,this.loading.node.active=!1,this._itemPool=new cc.NodePool,t=0;t<n.TOTAL_LEVEL;++t)i=cc.instantiate(this.item),this._itemPool.put(i);p.GameAnalytics.setEnabledInfoLog(!0),p.GameAnalytics.setEnabledVerboseLog(!0),p.GameAnalytics.configureBuild("1.0.28"),h.default.getInstance().isHasTiniApp()?h.default.getInstance().getPlayerInfo().then(function(t){e.userTiki=t,p.GameAnalytics.configureUserId(t.customerId.toString()),p.GameAnalytics.initialize(_,E)}):(p.GameAnalytics.configureUserId("local_id"),p.GameAnalytics.initialize(_,E))},t.prototype.onNextLevel=function(e){this.playSound(a.CLICK,!1),"Skip"==e.target.name?(o.userData.isMusic&&cc.audioEngine.resumeMusic(),o.userData.unlock<n.TOTAL_LEVEL-1&&this.nextLevel(e)):(o.userData.unlock,this.nextLevel(e))},t.prototype.nextLevel=function(e){var t=this;if(this._current.level!=n.TOTAL_LEVEL){o.logNextLevel(this._current.level),s.default.getInstance().showUI(d.GroupUI.InGame,!0),s.default.getInstance().showUI(d.GroupUI.EndGame,!1),this._current.node.active=!1;var i,r=this.node.getChildByName("Level"+(this._current.level+1));if(r)return this._block=!1,void(r.active=!0);this._current.level==o.userData.unlock+1?(i=++o.userData.unlock,++i):i=this._current.level+1,"Skip"==e.target.name&&l.default.saveData(l.getKeyData(),o.userData),this._bundle.getPrefabByName("Level"+i,function(e,n){t.loading.node.active=!0,t.loading.updateProgress(e/n)},function(e,n){if(e)console.error(e);else{var i=cc.instantiate(n);t.loading.node.active=!1,t.node.addChild(i),t._block=!1,t.preloadLevel(o.userData.unlock+1)}})}},t.prototype.preloadLevel=function(e){this._bundle.getPrefabByName("Level"+(e+1))},t.prototype.onReplay=function(){this.playSound(a.CLICK,!1),this._current.node.getComponent("Mask").reset(),this._current.node.getComponent("Mask")._hint=!1,this._block=!1,s.default.getInstance().showUI(d.GroupUI.InGame,!0),s.default.getInstance().showUI(d.GroupUI.EndGame,!1)},t.prototype.activeLevel=function(e){var t=this;this.preloadLevel(e);for(var n="Level"+e,o=0,i=this.node.children;o<i.length;o++){var r=i[o];if(r.name==n)return this._current.node.active=!1,void(r.active=!0)}this._bundle.getPrefabByName(n,function(e,n){t.loading.node.active=!0,t.loading.updateProgress(e/n)},function(e,n){if(e)console.error(e);else{t.loading.node.active=!1,t._current.node.active=!1;var o=cc.instantiate(n);t.node.addChild(o)}})},t.prototype.onClickList=function(){var e=this;if(this.playSound(a.CLICK,!1),this._list)return this._list.active=!0,void(this._list.zIndex=cc.macro.MAX_ZINDEX);var t=0;this.loading.node.active=!0,console.time("preload_list"),cc.resources.preload("List/List",cc.Prefab,function(n,o){t<=n/o&&(t=n/o),e.loading.updateProgress(t)},function(t){console.timeEnd("preload_list"),t||console.time("load_list"),cc.resources.load("List/List",function(t,n){t||(console.timeEnd("load_list"),e._list=cc.instantiate(n),e._list.zIndex=cc.macro.MAX_ZINDEX,cc.find("Canvas").addChild(e._list),e.loading.node.active=!1)})})},t.prototype.onShowHint=function(e){this.playSound(a.CLICK,!1),o.logEvent("UseHint"),s.default.getInstance().pauseHintIdle(),o.userData.isMusic&&cc.audioEngine.resumeMusic(),this._block||this.showHint(e)},t.prototype.showHint=function(e){e&&(e.target.opacity=200),this._current.node.getComponent("Mask").onHint(),this._current.node.getComponent("Mask")._hint=!0},t.prototype.onClickPencil=function(){var e=this;if(this.playSound(a.CLICK,!1),this._pencil)return this._pencil.active=!0,void(this._pencil.zIndex=cc.macro.MAX_ZINDEX);var t=0;this.loading.node.active=!0,cc.resources.preload("Pencils/Pencils",cc.Prefab,function(n,o){t<n/o&&(t=n/o),e.loading.updateProgress(t)},function(t){t||cc.resources.load("Pencils/Pencils",cc.Prefab,function(t,n){t||(e._pencil=cc.instantiate(n),e._pencil.zIndex=cc.macro.MAX_ZINDEX,cc.find("Canvas").addChild(e._pencil),e.loading.node.active=!1)})})},t.prototype.onClickSetting=function(){this.playSound(a.CLICK,!1),this._setting?this._setting.active=!0:(this._setting=cc.instantiate(this.setting),cc.find("Canvas").addChild(this._setting))},t.prototype.playBG=function(){cc.audioEngine.playMusic(this.sounds[a.BG],!0)},t.prototype.playSound=function(e,t){return void 0===t&&(t=null),o.userData.isSound?cc.audioEngine.playEffect(this.sounds[e],t):-1},t.prototype.setLevel=function(e){s.default.getInstance().setLevel(e),o.logLevel(e-1)},t.prototype.onShare=function(e){void 0===e&&(e=null),o.logEvent("ShareClick")},t.prototype.onInvite=function(e){void 0===e&&(e=null),o.logEvent("InviteClick")},t.prototype.canShare=function(){},t.prototype.canInvite=function(){},t.prototype.checkFirstPlay=function(){return!o.userData.firstPlay&&(o.userData.firstPlay=(new Date).getTime(),l.default.saveData(l.getKeyData(),o.userData),!0)},t.logEvent=function(e){p.GameAnalytics.addDesignEvent(e)},t.logFailed=function(e){p.GameAnalytics.addProgressionEvent(f.EGAProgressionStatus.Fail,"Level"+(e+1))},t.logPassed=function(e){p.GameAnalytics.addProgressionEvent(f.EGAProgressionStatus.Complete,"Level"+(e+1))},t.logLevel=function(e){o.logEvent("Enter_Level_"+(e+1)),p.GameAnalytics.addProgressionEvent(f.EGAProgressionStatus.Start,"EnterLevel"+(e+1))},t.logNextLevel=function(e){o.logEvent("NextLevel"+e),p.GameAnalytics.addProgressionEvent(f.EGAProgressionStatus.Start,"NextLevel"+(e+1))},t.logReceiveRewardAds=function(){},t.logShowInterestialAds=function(){},t.userData=null,t._instacne=null,r([m(cc.Prefab)],t.prototype,"setting",void 0),r([m([cc.AudioClip])],t.prototype,"sounds",void 0),r([m(u.default)],t.prototype,"loading",void 0),r([m(cc.Prefab)],t.prototype,"star",void 0),r([m(cc.Prefab)],t.prototype,"item",void 0),r([m(cc.Prefab)],t.prototype,"incorrect",void 0),r([m(cc.Prefab)],t.prototype,"correct",void 0),r([m(cc.Prefab)],t.prototype,"guide",void 0),r([m(cc.Prefab)],t.prototype,"textGuide",void 0),o=r([y],t)}(cc.Component);n.default=A,cc._RF.pop()},{"./BundleManager":"BundleManager","./Data":"Data","./Loading":"Loading","./Splash":"Splash","./TiniController":"TiniController","./UIController":"UIController",gameanalytics:1}],GuideButton:[function(e,t,n){"use strict";cc._RF.push(t,"c5556PjlNFHJK0nPIBK1s2J","GuideButton");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Guide"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.next=null,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.next?e.next.active=!0:a.default.getInstance().showWelcome(),e.node.parent.active=!1},this)},r([l(cc.Node)],t.prototype,"next",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./Guide":"Guide"}],Guide:[function(e,t,n){"use strict";cc._RF.push(t,"e7815sv5e1HYIK76ZmFh9b6","Guide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Script/GameManager"),s=e("../Script/UIController"),c=e("../Script/UIController"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pencil=null,t.lv1=null,t.lv2=null,t.shadow=null,t.textGuide2=null,t.topButton=[],t.botButton=[],t.hint=null,t.startBtn=null,t.txt=null,t.guide=[],t.textGuide=[],t}var n;return i(t,e),n=t,t.getInstance=function(){return n._instance||(n._instance=this),n._instance},t.prototype.onLoad=function(){n._instance=this},t.prototype.onEnable=function(){this.textGuide[0].active=!0,this.textGuide[1].active=!1,this.node.on("onfinish",this.onFinish,this),this.shadow.active=!1,this.pencil.getComponent(cc.Animation).play("Guide"),this.textGuide2.active=!1,this.pencil.active=!0,this.topButton.forEach(function(e){e.play("show_top")}),this.botButton.forEach(function(e){e.play("show_bot")}),this.hint.active=!1,this.startBtn.active=!1,this.txt.active=!1,this.startBtn.active=!1,this.guide.forEach(function(e){e.active=!1}),this.node.on(cc.Node.EventType.TOUCH_START,this.hidePencil,this),this.node.on(cc.Node.EventType.TOUCH_END,this.showPencil,this)},t.prototype.hidePencil=function(){this.pencil.active=!1},t.prototype.showPencil=function(){this.pencil.active=!0},t.prototype.start=function(){this.lv2.active=!1,this.lv1.active=!0},t.prototype.onDisable=function(){s.default.getInstance().showUI(c.GroupUI.InGame,!0),cc.find("Canvas/GameContainer").children[0].active=!0},t.prototype.showHintGuide=function(){this.lv2.getComponent("Mask").onHint(),this.lv2.getComponent("Mask")._hint=!0,this.shadow.active=!1,this.textGuide2.active=!1,this.pencil.getComponent(cc.Animation).stop(),this.pencil.getComponent(cc.Animation).setCurrentTime(0,"Guide2"),this.textGuide[1].active=!0},t.prototype.onFinish=function(){var e=this;this.lv1.active?(this.node.off(cc.Node.EventType.TOUCH_START,this.hidePencil,this),this.node.off(cc.Node.EventType.TOUCH_START,this.showPencil,this),this.pencil.active=!1,this.textGuide[0].active=!1,this.topButton.forEach(function(e){e.play("hide_top")}),this.botButton.forEach(function(e){e.play("hide_bot")}),this.scheduleOnce(function(){e.topButton.forEach(function(e){e.play("show_top")}),e.botButton.forEach(function(e){e.play("show_bot")}),e.hint.active=!0;var t=e.hint.getComponent(cc.Animation).play("show_hint");e.scheduleOnce(function(){e.hint.getComponent(cc.Animation).play("hint")},t.duration),e.lv1.getChildByName("Block").active=!0,e.lv1.active=!1,e.lv2.active=!0,e.scheduleOnce(function(){e.shadow.active=!0},0),e.pencil.active=!0,e.pencil.getComponent(cc.Animation).play("Guide2"),e.pencil.x=cc.view.getCanvasSize().width/2-50,e.textGuide2.active=!0},1)):(this.topButton.forEach(function(e){e.play("hide_top")}),this.botButton.forEach(function(e){e.play("hide_bot")}),this.scheduleOnce(function(){e.topButton.forEach(function(e){e.play("show_top")}),e.botButton.forEach(function(e){e.play("show_bot")}),e.scheduleOnce(function(){e.showGuideButton()},1)},1))},t.prototype.startGame=function(){a.default.getInstance()._block=!1,this.node.active=!1},t.prototype.showGuideButton=function(){this.guide[0].active=!0},t.prototype.showWelcome=function(){var e=this;this.lv2.active=!1,this.scheduleOnce(function(){e.txt.active=!0,e.scheduleOnce(function(){e.startBtn.active=!0},1)},1)},t.prototype.update=function(){this.hint.x=cc.view.getCanvasSize().width/2},r([d(cc.Node)],t.prototype,"pencil",void 0),r([d(cc.Node)],t.prototype,"lv1",void 0),r([d(cc.Node)],t.prototype,"lv2",void 0),r([d(cc.Node)],t.prototype,"shadow",void 0),r([d(cc.Node)],t.prototype,"textGuide2",void 0),r([d([cc.Animation])],t.prototype,"topButton",void 0),r([d([cc.Animation])],t.prototype,"botButton",void 0),r([d(cc.Node)],t.prototype,"hint",void 0),r([d(cc.Node)],t.prototype,"startBtn",void 0),r([d(cc.Node)],t.prototype,"txt",void 0),r([d([cc.Node])],t.prototype,"guide",void 0),r([d([cc.Node])],t.prototype,"textGuide",void 0),n=r([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Script/GameManager":"GameManager","../Script/UIController":"UIController"}],Incorrect:[function(e,t,n){"use strict";cc._RF.push(t,"2074adZCAlFlJLjIiuk/w3J","Incorrect");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,"incorrect"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){"Correct"==this.node.name?this.node.getComponent(cc.Animation).play("correct"):this.node.getComponent(cc.Animation).play(c)},t.prototype.hide=function(){this.node.active=!1},r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],InsideEvent:[function(e,t,n){"use strict";cc._RF.push(t,"acbddAZoEZJdIYipf62mds7","InsideEvent");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onCollisionEnter=function(){this.node.opacity=0},r([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],ItemPencil:[function(e,t,n){"use strict";cc._RF.push(t,"2c5a1g2B1NKea1GE5L5drcM","ItemPencil");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.STATE=void 0;var a,s=e("./Item"),c=e("./GameManager"),l=cc._decorator,u=l.ccclass,d=l.property;(function(e){e[e.USE=0]="USE",e[e.USED=1]="USED",e[e.FREE=2]="FREE"})(a=n.STATE||(n.STATE={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use=null,t.used=null,t.free=null,t._state=null,t._block=!1,t._view=null,t}return i(t,e),t.prototype.onEnable=function(){this._view=this.node.parent.parent},t.prototype.setState=function(e){switch(this._state=e,this.use.active=!1,this.used.active=!1,this.free.active=!1,this._block=!1,e){case a.USE:this.use.active=!0;break;case a.USED:this.used.active=!0;break;case a.FREE:this.free.active=!0}},t.prototype.onClick=function(t){this.gameManager.playSound(c.SOUND.CLICK),this._state!=a.USED&&(this._block||(this._block=!0,this.event._this=this,this.event.idItem=this.getID(),this.event.state=this._state,e.prototype.onClick.call(this,t)))},t.prototype.update=function(){var e=this.node.convertToNodeSpaceAR(this._view.position,this.node.position);e.y<-2030||e.y>46?this.node.opacity=0:this.node.opacity=255},r([d(cc.Node)],t.prototype,"use",void 0),r([d(cc.Node)],t.prototype,"used",void 0),r([d(cc.Node)],t.prototype,"free",void 0),r([u],t)}(s.default);n.default=p,cc._RF.pop()},{"./GameManager":"GameManager","./Item":"Item"}],Item:[function(e,t,n){"use strict";cc._RF.push(t,"a05e431UMVDOZz9jWUNbL/z","Item");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.gameManager=null,t.idItem=null,t.event=null,t}return i(t,e),t.prototype.start=function(){this.event=new cc.Event.EventCustom("itemclick",!0),this.gameManager=a.default.getInstance()},t.prototype.setID=function(e){this.idItem=e},t.prototype.getID=function(){return this.idItem},t.prototype.onClick=function(){this.target?this.target.dispatchEvent(this.event):this.node.dispatchEvent(this.event)},t.prototype.update=function(){this.node.y>-170||this.node.y<-1600?this.node.opacity=0:this.node.opacity=255},r([l(cc.Node)],t.prototype,"target",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./GameManager":"GameManager"}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=e("polyglot.min"),o=null;function i(e){return window.i18n.languages[e]}function r(e){e&&(o?o.replace(e):o=new n({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{en:e("../i18n/en")},curLang:""}),window.i18n.curLang="en",window.i18n.languages[cc.sys.language]&&(window.i18n.curLang=cc.sys.language),console.log("Default language: "+cc.sys.language),r(i(window.i18n.curLang)||{}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=i(e)||{};window.i18n.curLang=e,r(t),this.inst=o}},t:function(e,t){if(o)return o.t(e,t)},inst:o,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],n=0;n<e.length;++n){var o=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,o)}for(var i=0;i<t.length;++i){var r=t[i];r.node.active&&r.updateLabel()}for(var a=[],s=0;s<e.length;++s){var c=e[s].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(a,c)}for(var l=0;l<a.length;++l){var u=a[l];u.node.active&&u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"../i18n/en":"en","polyglot.min":"polyglot.min"}],LevelController:[function(e,t,n){"use strict";cc._RF.push(t,"50ccbOeP1NGAaOCjWoxWPeM","LevelController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Touch"),s=e("./GameManager"),c=e("./TiniController"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.init=[],t.complete=[],t.skeleton=[],t.level=0,t.label=null,t.inside=[],t.block=null,t.touch=null,t.outside=null,t.pen=null,t._pen=null,t._incorrect=null,t._correct=null,t.textGuide=null,t}return i(t,e),t.prototype.onLoad=function(){s.default.getInstance(),this.label.node.active=!1},t.prototype.onEnable=function(){s.default.getInstance()._current={level:this.level,node:this.node},s.default.getInstance().setLevel(this.level),this.node.on("draw_complete",this.onComplete.bind(this),this),this.node.on("draw_start",this.onStartDraw,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.block.active=!1,this._pen=this.node.getChildByName("Pen"),this._pen||(this._pen=cc.instantiate(this.pen),this.node.addChild(this._pen)),this._pen.active=!1,this._pen.zIndex=cc.macro.MAX_ZINDEX,"Guide"!=this.node.parent.name&&(this.textGuide=this.node.getChildByName("TextGuide"),this.textGuide?this.textGuide.getComponent(cc.Animation).play("show_text_guide"):(this.textGuide=cc.instantiate(s.default.getInstance().textGuide),this.textGuide.opacity=0,this.node.addChild(this.textGuide),this.textGuide.getComponent("LocalizedLabel").dataID=this.level,this.textGuide.getComponent(cc.Animation).play("show_text_guide")))},t.prototype.onDisable=function(){console.log("on end level",this.level),c.default.getInstance().isHasTiniApp()&&c.default.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"level_end",data:{level_name:"Level "+this.level,success:!0,user_id:s.default.getInstance().userTiki.customerId}}})},t.prototype.start=function(){s.default.getInstance().preloadLevel(this.level),console.log("on start level",this.level),c.default.getInstance().isHasTiniApp()&&c.default.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"level_start",data:{level_name:"Level "+this.level,user_id:s.default.getInstance().userTiki.customerId}}})},t.prototype.touchStartEvent=function(e){this.node.getComponent("Mask").touchStartEvent(e)},t.prototype.touchMoveEvent=function(e){this.node.getComponent("Mask").touchMoveEvent(e)},t.prototype.touchEndEvent=function(e){this.node.getComponent("Mask").touchEndEvent(e)},t.prototype.onStartDraw=function(){this._pen,this._pen.active=!0},t.prototype.onComplete=function(){this._pen.active=!1},t.prototype.showParticle=function(){this.textGuide&&this.textGuide.getComponent(cc.Animation).play("hide_text_guide");var e=cc.instantiate(s.default.getInstance().star),t=this.node.getComponent("Mask").ticketNode;e.x=t.x,e.y=t.y,e.zIndex=cc.macro.MAX_ZINDEX,this.node.addChild(e)},t.prototype.showIncorrect=function(){if(!this._incorrect){var e=s.default.getInstance().incorrect;this._incorrect=cc.instantiate(e),this.node.addChild(this._incorrect)}this._incorrect.active=!0},t.prototype.showCorrect=function(){if(!this._correct){var e=s.default.getInstance().correct;this._correct=cc.instantiate(e),this.node.addChild(this._correct)}this._correct.active=!0},r([d({type:cc.Component.EventHandler})],t.prototype,"init",void 0),r([d({type:cc.Component.EventHandler})],t.prototype,"complete",void 0),r([d([sp.Skeleton])],t.prototype,"skeleton",void 0),r([d],t.prototype,"level",void 0),r([d(cc.Label)],t.prototype,"label",void 0),r([d([cc.Node])],t.prototype,"inside",void 0),r([d(cc.Node)],t.prototype,"block",void 0),r([d(a.default)],t.prototype,"touch",void 0),r([d(cc.Node)],t.prototype,"outside",void 0),r([d(cc.Prefab)],t.prototype,"pen",void 0),r([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./GameManager":"GameManager","./TiniController":"TiniController","./Touch":"Touch"}],List:[function(e,t,n){"use strict";cc._RF.push(t,"9ed22KdAPhB8ZjMEBkOk8+z","List");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Script/Panel"),s=e("../Script/GameManager"),c=e("./Click"),l=e("./GameManager"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=[],t._size=null,t._data=null,t._current=null,t._view=null,t}return i(t,e),t.prototype.onLoad=function(){this.initList()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),l.default.getInstance()._current.level?(this._data=l.default.userData,this.node.on("onclick",this.onClick,this),this.setState(),this._view=this.container.getChildByName("view"),this.scrollToCurrent()):this.node.active=!1},t.prototype.onClick=function(e){e.level!=this._current.node.name&&(l.default.getInstance().activeLevel(e.level),this._current.setState(c.STATE.UNLOCK),this._current=e.target.getComponent("Click"),this._current.setState(c.STATE.CURRENT)),this.onClose()},t.prototype.initList=function(){this.content.removeAllChildren(!0);for(var e=l.default.getInstance()._itemPool,t=0;t<s.TOTAL_LEVEL;++t){var n=null;(n=e.size()>0?e.get():cc.instantiate(this.item)).name=(t+1).toString(),this.content.addChild(n)}},t.prototype.onClickSetting=function(){l.default.getInstance().onClickSetting()},t.prototype.setState=function(){for(var e=null,t=0;t<this._data.unlock+1;++t)(n=this.content.children[t]).getChildByName("number").active=!1,(o=n.getComponent("Click"))._clicked=!1,o.setState(c.STATE.UNLOCK),t<23?e=this.icon[0]:t<40?e=this.icon[1]:t<50?e=this.icon[2]:t<70?e=this.icon[3]:t<90?e=this.icon[4]:t<110?e=this.icon[5]:t<130?e=this.icon[6]:t<150?e=this.icon[7]:t<171?e=this.icon[8]:t<192?e=this.icon[9]:t<213?e=this.icon[10]:t<234?e=this.icon[11]:t<=250&&(e=this.icon[12]),[124,109,103,102,101,99,94,84,82,80,78,76,68,66,64,62,60].includes(t)?n.getChildByName("content").scale=1.2:[207].includes(t)?n.getChildByName("content").scale=4:[216,100,96,58,114,117,98].includes(t)?n.getChildByName("content").scale=1.7:[79].includes(t)?n.getChildByName("content").scale=.3:[208,192,182].includes(t)?n.getChildByName("content").scale=2:[83,81].includes(t)?n.getChildByName("content").scale=.6:n.getChildByName("content").scale=t>149&&t<=250?1.3:.45,n.getChildByName("content").active=!0,n.getChildByName("content").getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame(t+1);for(this._current=this.content.children[l.default.getInstance()._current.level-1].getComponent("Click"),this._current._clicked=!1,this._current.setState(c.STATE.CURRENT),t=this._data.unlock+1;t<s.TOTAL_LEVEL;++t){var n,o;(n=this.content.children[t]).getChildByName("number").active=!0,n.getChildByName("number").getComponent(cc.Label).string=t+1,n.getChildByName("content").active=!1,(o=n.getComponent("Click"))._clicked=!0,o.setState(c.STATE.LOCK)}},t.prototype.scrollToCurrent=function(){var e=1-this.content.children.indexOf(this._current.node)/this.content.children.length;this.container.getComponent(cc.ScrollView).scrollToPercentVertical(e+1/(s.TOTAL_LEVEL/5),.5)},r([p([cc.SpriteAtlas])],t.prototype,"icon",void 0),r([d],t)}(a.default);n.default=f,cc._RF.pop()},{"../Script/GameManager":"GameManager","../Script/Panel":"Panel","./Click":"Click","./GameManager":"GameManager"}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"2c1effJPj9A2aIZ52eZXDw4","Loading");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=null,t.loading=null,t}return i(t,e),t.prototype.onEnable=function(){this.reset()},t.prototype.reset=function(){this.percent.string="0 %",this.loading.progress=0},t.prototype.updateProgress=function(e){this.loading.progress=e,this.percent.string=Math.floor(100*this.loading.progress)+" %"},t.prototype.close=function(){this.node.active=!1},r([c(cc.Label)],t.prototype,"percent",void 0),r([c(cc.ProgressBar)],t.prototype,"loading",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],Mask:[function(e,t,n){"use strict";cc._RF.push(t,"591b4tzos5MRYPByMwIIAPz","Mask");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),s=e("./UIController"),c=e("./UIController"),l=e("./GameManager"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskNode=null,t.ticketNode=null,t.anim=null,t.pic=null,t.block=null,t._hint=!1,t.calcDebugger=!1,t.tempDrawPoints=[],t.polygonPointsList=[],t}return i(t,e),t.prototype.onLoad=function(){this.pic.node.active=!0,this.anim.setAnimation(0,"idle",!0),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this)},t.prototype.onEnable=function(){this._hint=!1,this.block.active=!1,this.pic.node.active=!0,this.anim.setAnimation(0,"idle",!0),this.reset()},t.prototype.onDisable=function(){this.beforeDestroy()},t.prototype.beforeDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this)},t.prototype.touchStartEvent=function(e){var t=this.ticketNode.convertToNodeSpaceAR(e.getLocation());this.clearMask(t),this.pic.node.opacity=255,cc.Tween.stopAllByTarget(this.pic.node),l.default.getInstance().playSound(a.SOUND.DRAW,!0);var n=new cc.Event.EventCustom("draw_start",!0);this.node.dispatchEvent(n),this.node.getChildByName("Pen").position=this.node.convertToNodeSpaceAR(e.getLocation())},t.prototype.touchMoveEvent=function(e){var t=this.ticketNode.convertToNodeSpaceAR(e.getLocation());this.clearMask(t),this.node.getChildByName("Pen").position=this.node.convertToNodeSpaceAR(e.getLocation())},t.prototype.touchEndEvent=function(){this.tempDrawPoints=[];var e=new cc.Event.EventCustom("draw_complete",!0);this.node.dispatchEvent(e),this.calcProgress(),this._hint?this.onHint():cc.Tween.stopAllByTarget(this.pic.node),cc.audioEngine.stopAllEffects()},t.prototype.clearMask=function(e){var t=this.maskNode.getComponent(cc.Mask)._graphics,n=this.tempDrawPoints.length;if(this.tempDrawPoints.push(e),n<=1)t.circle(e.x,e.y,42.5),t.fill(),this.polygonPointsList.forEach(function(t){if(!t.isHit){var n=e.x>t.rect.x&&e.x<t.rect.x+t.rect.width,o=e.y>t.rect.y&&e.y<t.rect.y+t.rect.height;n&&o&&(t.isHit=!0)}});else{var o=this.tempDrawPoints[n-2],i=this.tempDrawPoints[n-1];t.moveTo(o.x,o.y),t.lineTo(i.x,i.y),t.lineWidth=85,t.lineCap=cc.Graphics.LineCap.ROUND,t.lineJoin=cc.Graphics.LineJoin.ROUND,t.strokeColor=cc.color(255,255,255,255),t.stroke(),this.polygonPointsList.forEach(function(e){e.isHit=e.isHit||cc.Intersection.lineRect(o,i,e.rect)})}},t.prototype.calcProgress=function(){var e=this,t=0,n=this.ticketNode.getComponent(cc.Graphics);this.polygonPointsList.forEach(function(o){o.isHit&&(t+=1,e.calcDebugger&&(n.rect(o.rect.x,o.rect.y,o.rect.width,o.rect.height),n.fillColor=cc.color(216,18,18,255),n.fill()))}),Math.floor(.55*this.polygonPointsList.length)<=t?(this.pic.node.active=!1,this.onComplete(),this.node.getComponent("LevelController").showParticle(),this.node.getComponent("LevelController").showParticle(),this.node.getComponent("LevelController").showCorrect(),cc.tween(this.node).delay(.001).call(function(){l.default.getInstance().playSound(a.SOUND.CORRECT1,!1)}).start()):(cc.tween(this.node).delay(.001).call(function(){l.default.getInstance().playSound(a.SOUND.FALSE,!1)}).start(),this.node.getComponent("LevelController").showIncorrect(),this.reset())},t.prototype.onComplete=function(){var e=this;c.default.getInstance().showUI(s.GroupUI.InGame,!1),this._hint=!1,this.block.active=!0,this.anim.setAnimation(0,"finish",!0),this.scheduleOnce(function(){l.default.getInstance().playSound(a.SOUND.WIN,!1)},.25),cc.tween(this.node).call(function(){e.onFinish()}).start()},t.prototype.onFinish=function(){this.node.getComponent("LevelController").block.active=!0;var e=new cc.Event.EventCustom("onfinish",!0);this.node.dispatchEvent(e)},t.prototype.reset=function(){this.node.getComponent("LevelController").textGuide&&this.node.getComponent("LevelController").textGuide.getComponent(cc.Animation).play("show_text_guide"),cc.Tween.stopAllByTarget(this.pic.node),this.pic.node.opacity=255,this.block.active=!1,this.pic.node.active=!0,this.anim.setAnimation(0,"idle",!0),this.maskNode.getComponent(cc.Mask)._graphics.clear(),this.tempDrawPoints=[],this.polygonPointsList=[],this.ticketNode.getComponent(cc.Graphics).clear();for(var e=0;e<this.ticketNode.width;e+=40)for(var t=0;t<this.ticketNode.height;t+=40)this.polygonPointsList.push({rect:cc.rect(e-this.ticketNode.width/2,t-this.ticketNode.height/2,40,40),isHit:!1})},t.prototype.onHint=function(){cc.tween(this.pic.node).repeatForever(cc.tween().to(.7,{opacity:100},{easing:"sineInOut"}).to(.7,{opacity:255},{easing:"sineInOut"})).start()},r([p(cc.Node)],t.prototype,"maskNode",void 0),r([p(cc.Node)],t.prototype,"ticketNode",void 0),r([p(sp.Skeleton)],t.prototype,"anim",void 0),r([p(cc.Sprite)],t.prototype,"pic",void 0),r([p(cc.Node)],t.prototype,"block",void 0),r([d],t)}(cc.Component);n.default=f,cc._RF.pop()},{"./GameManager":"GameManager","./UIController":"UIController"}],OptimizeScroll:[function(e,t,n){"use strict";cc._RF.push(t,"64003P/IHZEVa55JDr2frUb","OptimizeScroll");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=null,t.content=null,t}return i(t,e),t.prototype.update=function(){for(var e=cc.rect(-this.view.width/2,-this.content.y-this.view.height/2,this.view.width,this.view.height),t=0;t<this.content.children.length;t++){var n=this.content.children[t];e.intersects(n.getBoundingBox())?n.opacity=255:n.opacity=0}},r([c(cc.Node)],t.prototype,"view",void 0),r([c(cc.Node)],t.prototype,"content",void 0),r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],Panel:[function(e,t,n){"use strict";cc._RF.push(t,"6d896/M2RlMS6s8UA65fVF2","Panel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=e("../Script/Data"),c=e("./GameManager"),l=e("./GameManager"),u=cc._decorator,d=u.ccclass,p=u.property;(function(e){e.HideContainer="hide_container",e.ShowContainer="show_container",e.HideTop="hide_top",e.ShowTop="show_top"})(a||(a={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.topButton=null,t.content=null,t.item=null,t.userData=null,t.size=null,t}return i(t,e),t.prototype.onEnable=function(){this.addEventListener(),this.userData=l.default.userData,this.onOpen()},t.prototype.onDisable=function(){this.removeEventListener()},t.prototype.addEventListener=function(){this.node.on("itemclick",this.onClickItem,this)},t.prototype.removeEventListener=function(){this.node.off("itemclick",this.onClickItem,this)},t.prototype.onClickItem=function(){},t.prototype.saveData=function(e,t){s.default.saveData(e,t)},t.prototype.onClose=function(){var e=this;l.default.getInstance().playSound(c.SOUND.CLICK,!1),this.topButton.getComponent(cc.Animation).play(a.HideTop),this.container.getComponent(cc.Animation).play(a.HideContainer),this.scheduleOnce(function(){e.close()},.5)},t.prototype.close=function(){this.node.active=!1},t.prototype.onOpen=function(){this.topButton.getComponent(cc.Animation).play(a.ShowTop),this.container.getComponent(cc.Animation).play(a.ShowContainer)},t.prototype.update=function(){this.size=cc.view.getCanvasSize(),375==this.size.width&&812==this.size.height?(this.topButton.scale=.9,this.container.scale=.9):(this.topButton.scale=1,this.container.scale=1)},r([p(cc.Node)],t.prototype,"container",void 0),r([p(cc.Node)],t.prototype,"topButton",void 0),r([p(cc.Node)],t.prototype,"content",void 0),r([p(cc.Prefab)],t.prototype,"item",void 0),r([d],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Script/Data":"Data","./GameManager":"GameManager"}],Pencils:[function(e,t,n){"use strict";cc._RF.push(t,"22156XX7adGipmlMVCAH4zk","Pencils");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Panel"),s=e("./Data"),c=e("./ItemPencil"),l=e("./GameManager"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=[],t._bag=null,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this._bag=l.default.userData,this._bag?this.initItem():(this._bag=l.default.userData,this.initItem())},t.prototype.onClickItem=function(e){var t=e.state,n=e.idItem,o=e.target;this._bag.pencils[n]?t==c.STATE.USE&&(this.content.children[this._bag.pencil].getComponent("ItemPencil").setState(c.STATE.USE),o.getComponent("ItemPencil").setState(c.STATE.USED),this._bag.pencil=n):(o.getComponent("ItemPencil").setState(c.STATE.USE),this._bag.pencils[n]=!0),l.default.userData=this._bag,s.default.saveData(s.getKeyData(),this._bag)},t.prototype.initItem=function(){if(15!=this.content.children.length)for(var e=0;e<15;++e){var t=cc.instantiate(this.item);t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.icon[e],t.getComponent("ItemPencil").setID(e);var n=this._bag.pencils[e]?c.STATE.USE:c.STATE.FREE;this._bag.pencil==e&&(n=c.STATE.USED),t.getComponent("ItemPencil").setState(n),this.content.addChild(t)}},r([p([cc.SpriteFrame])],t.prototype,"icon",void 0),r([d],t)}(a.default);n.default=f,cc._RF.pop()},{"./Data":"Data","./GameManager":"GameManager","./ItemPencil":"ItemPencil","./Panel":"Panel"}],Pen:[function(e,t,n){"use strict";cc._RF.push(t,"9e232jRA+BCyLd2Oyp108sP","Pen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pencils=null,t._gameManager=null,t}return i(t,e),t.prototype.onLoad=function(){this._gameManager=cc.find("Canvas/GameContainer").getComponent("GameManager")},t.prototype.onEnable=function(){this.node.angle=0,cc.tween(this.node).repeatForever(cc.tween().by(.3,{angle:-5}).by(.3,{angle:5})).start();var e=a.default.userData.pencil;this.node.getComponent(cc.Sprite).spriteFrame=this.pencils.getSpriteFrame(e+1)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},r([l(cc.SpriteAtlas)],t.prototype,"pencils",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./GameManager":"GameManager"}],Setting:[function(e,t,n){"use strict";cc._RF.push(t,"22889ODwDNK6bADulTkPi3w","Setting");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Script/Panel"),s=e("./Button"),c=e("../../Script/Data"),l=e("../../Script/GameManager"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.music=null,t.sound=null,t.vibrate=null,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.node.on("change_setting",this.onChange,this),this.music.setState(this.userData.isMusic),this.sound.setState(this.userData.isSound),this.vibrate.setState(this.userData.isVibrate)},t.prototype.onChange=function(e){switch(e.nameTarget){case"music":this.userData.isMusic=e.state,e.state?l.default.getInstance().playBG():cc.audioEngine.pauseMusic();break;case"sound":this.userData.isSound=e.state;break;case"vibrate":this.userData.isVibrate=e.state}l.default.userData=this.userData,this.saveData(c.KEY.LOCAL,this.userData)},r([p(s.default)],t.prototype,"music",void 0),r([p(s.default)],t.prototype,"sound",void 0),r([p(s.default)],t.prototype,"vibrate",void 0),r([d],t)}(a.default);n.default=f,cc._RF.pop()},{"../../Script/Data":"Data","../../Script/GameManager":"GameManager","../../Script/Panel":"Panel","./Button":"Button"}],Splash:[function(e,t,n){"use strict";cc._RF.push(t,"6965dphFtFJarv3YAgzfcIk","Splash");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./BundleManager"),s=e("./Data"),c=e("./Loading"),l=e("./GameManager"),u=e("./TiniController"),d=cc._decorator,p=d.ccclass,f=d.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=null,t._percent=0,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){var e=this;u.default.getInstance().init(),s.default.getData(s.getKeyData(),function(t){console.log("Get data splash",t),n.userData=t;var o=t.unlock+1;console.time("preloadScene"),cc.director.preloadScene("Game",function(t,n){e._percent<=t/n&&(e._percent=t/n),e.loading.updateProgress(e._percent)},function(e){console.timeEnd("preloadScene"),e&&cc.error(e),console.time("loadScene"),cc.director.loadScene("Game",function(){console.timeEnd("loadScene")})}),console.time("bundle"),a.default.getInstance().loadBundle("resources",function(){console.log("Start "+o),console.log("End "+(o+2>l.TOTAL_LEVEL?o+(l.TOTAL_LEVEL-o):o+2)),a.default.getInstance().loadLevelSequence(o,o+2>l.TOTAL_LEVEL?o+(l.TOTAL_LEVEL-o):o+2,null,function(){console.timeEnd("bundle")})})})},t.userData=null,r([f(c.default)],t.prototype,"loading",void 0),n=r([p],t)}(cc.Component);n.default=v,cc._RF.pop()},{"./BundleManager":"BundleManager","./Data":"Data","./GameManager":"GameManager","./Loading":"Loading","./TiniController":"TiniController"}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],TiniController:[function(e,t,n){"use strict";cc._RF.push(t,"9d170HMotNNV7eDgrVWYl0S","TiniController");var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("uuid"),r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.callbacks={}}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.init=function(){var e=this;window.addEventListener("message",function(t){var n=t.data,o=n.requestId,i=n.result;if(void 0!==e.callbacks[o]){var r=e.callbacks[o];delete e.callbacks[o],r(i)}})},e.prototype.sendMessageToTiniApp=function(e,t){var n=i.v4();this.callbacks[n]=t,my.postMessage({requestId:n,params:e})},e.prototype.isHasTiniApp=function(){try{return my}catch(e){}},e.prototype.getPlayerInfo=function(){var e=this;return new Promise(function(t){e.sendMessageToTiniApp({api:"getUserInfo"},function(e){t(e.res)})})},e.prototype.start=function(){},e._instance=null,t=o([a],e)}());n.default=s,cc._RF.pop()},{uuid:2}],Touch:[function(e,t,n){"use strict";cc._RF.push(t,"b95ad+peYBLDrVTpwNV4pFG","Touch");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._inside=[],t._level=null,t}return i(t,e),t.prototype.onEnable=function(){this._level=this.node.parent.parent.getComponent("LevelController")},t.prototype.onTouchStart=function(){this._inside=[]},t.prototype.onTouchEnd=function(){var e=new cc.Event.EventCustom("valid",!0);this._inside.length!=this._level.inside.length||this._inside.includes(this._level.outside)?e.valid=!1:e.valid=!0,this.node.dispatchEvent(e)},t.prototype.onCollisionEnter=function(e){this._inside.includes(e.node)||this._inside.push(e.node)},r([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],UIController:[function(e,t,n){"use strict";cc._RF.push(t,"c566cjyE7BAQ705WXiwKgLY","UIController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.GroupUI=void 0;var a,s,c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.InGame=0]="InGame",e[e.EndGame=1]="EndGame"})(a=n.GroupUI||(n.GroupUI={})),function(e){e.HideTop="hide_top",e.ShowTop="show_top",e.HideBot="hide_bot",e.ShowBot="show_bot",e.HideNext="hide_next",e.ShowNext="show_next",e.HideHint="hide_hint",e.ShowHint="show_hint",e.HintIdle="hint"}(s||(s={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.replay=null,t.textLevel=null,t.skip=null,t.setting=null,t.next=null,t.invite=null,t.share=null,t.pencil=null,t.list=null,t.hint=null,t}var n;return i(t,e),n=t,t.getInstance=function(){return n._instance||(n._instance=this),n._instance},t.prototype.onLoad=function(){n._instance=this},t.prototype.start=function(){},t.prototype.setLevel=function(e){this.textLevel.getComponent(cc.Label).string="LEVEL "+e},t.prototype.showInGame=function(e){var t=this;if(e){this.skip.getComponent(cc.Animation).play(s.ShowTop),this.setting.getComponent(cc.Animation).play(s.ShowTop),this.textLevel.getComponent(cc.Animation).play(s.ShowTop),this.list.getComponent(cc.Animation).play(s.ShowBot),this.pencil.getComponent(cc.Animation).play(s.ShowBot);var n=this.hint.getComponent(cc.Animation).play(s.ShowHint);this.scheduleOnce(function(){t.playHintIdle()},n.duration)}else this.skip.getComponent(cc.Animation).play(s.HideTop),this.setting.getComponent(cc.Animation).play(s.HideTop),this.textLevel.getComponent(cc.Animation).play(s.HideTop),this.list.getComponent(cc.Animation).play(s.HideBot),this.pencil.getComponent(cc.Animation).play(s.HideBot),this.hint.getComponent(cc.Animation).play(s.HideHint)},t.prototype.showEndGame=function(e){e?(this.replay.getComponent(cc.Animation).play(s.ShowTop),this.next.getComponent(cc.Animation).play(s.ShowNext),this.invite.getComponent(cc.Animation).play(s.ShowNext),this.share.getComponent(cc.Animation).play(s.ShowNext),this.textLevel.getComponent(cc.Animation).play(s.ShowTop)):(this.replay.getComponent(cc.Animation).play(s.HideTop),this.next.getComponent(cc.Animation).play(s.HideNext),this.invite.getComponent(cc.Animation).play(s.HideNext),this.share.getComponent(cc.Animation).play(s.HideNext));var t=cc.find("Canvas/GameContainer").getComponent("GameManager");this.share.active=t.canShare(),this.invite.active=t.canInvite()},t.prototype.showUI=function(e,t){switch(e){case a.InGame:this.showInGame(t);break;case a.EndGame:this.showEndGame(t)}},t.prototype.playHintIdle=function(){this.hint.getComponent(cc.Animation).play(s.HintIdle)},t.prototype.pauseHintIdle=function(){this.hint.getComponent(cc.Animation).pause(s.HintIdle)},t._instance=null,r([u(cc.Node)],t.prototype,"replay",void 0),r([u(cc.Node)],t.prototype,"textLevel",void 0),r([u(cc.Node)],t.prototype,"skip",void 0),r([u(cc.Node)],t.prototype,"setting",void 0),r([u(cc.Node)],t.prototype,"next",void 0),r([u(cc.Node)],t.prototype,"invite",void 0),r([u(cc.Node)],t.prototype,"share",void 0),r([u(cc.Node)],t.prototype,"pencil",void 0),r([u(cc.Node)],t.prototype,"list",void 0),r([u(cc.Node)],t.prototype,"hint",void 0),n=r([l],t)}(cc.Component);n.default=d,cc._RF.pop()},{}],en:[function(e,t){"use strict";cc._RF.push(t,"12c56tc0+hARL9aLtzOiOcS","en"),t.exports={guide:"H\u01b0\u1edbng d\u1eabn",guideHint:"B\u1ea5m v\xe0o \u0111\xe2y \u0111\u1ec3 hi\u1ec3n th\u1ecb g\u1ee3i \xfd",guideSkip:"B\u1ea5m v\xe0o \u0111\xe2y \u0111\u1ec3 b\u1ecf qua level",guideSetting:"B\u1ea5m v\xe0o \u0111\xe2y \u0111\u1ec3 m\u1edf c\xe0i \u0111\u1eb7t",guideList:"B\u1ea1n c\xf3 th\u1ec3 ph\xe1t l\u1ea1i m\u1ed9t c\u1ea5p \u0111\u1ed9 \u0111\xe3 m\u1edf kh\xf3a t\u1ea1i \u0111\xe2y",guidePencil:"Ch\u1ecdn c\u1ee5c t\u1ea9y y\xeau th\xedch c\u1ee7a b\u1ea1n t\u1ea1i \u0111\xe2y",loading:"\u0110ang t\u1ea3i...",level:"Level ",levels:"Levels",next:"TI\u1ebeP T\u1ee4C",setting:"C\xe0i \u0111\u1eb7t",pencils:"T\u1ea9y",use:"S\u1eed d\u1ee5ng",used:"\u0110\xe3 d\xf9ng",free:"Mi\u1ec5n ph\xed",music:"\xc2m nh\u1ea1c:",sound:"Hi\u1ec7u \u1ee9ng:",on:"B\u1eadt",off:"T\u1eaft",guide1:"X\xf3a con ch\xf3",guide2:"Troll c\xf4 \u1ea5y!",1:"C\u1ee9u con ong",2:"Lo\u1ea1i b\u1ecf t\u1ea3ng \u0111\xe1",3:"C\xf3 g\xec b\xean d\u01b0\u1edbi n\u1ec7m?",4:"M\u1edf h\u1ed9p qu\xe0",5:"Kh\u1ea9u ph\xe1o \u1edf \u0111\xe2u?",6:"X\xf3a con v\u1ecbt",7:"\u0110\xe1nh r\u0103ng s\u01b0 t\u1eed",8:"H\xf9 d\u1ecda anh \u1ea5y",9:"Hoa c\xf3 th\u1ef1c s\u1ef1 d\u1ecbu d\xe0ng?",10:"C\xf3 g\xec l\u1ea1?",11:"T\xecm c\xe2y \u0111\xe8n",12:"L\xe0m cho con chim t\u1ee9c gi\u1eadn",13:"T\u1eb7ng hoa cho b\u1ea1n g\xe1i c\u1ee7a b\u1ea1n",14:"Ch\u01a1i g\xf4n",15:"X\xf3a v\xedt",16:"Ph\xe1 k\xe9t s\u1eaft",17:"Tr\u1eebng ph\u1ea1t anh ta",18:"C\u1eaft d\xe2y",19:"Ch\u01a1i quy\u1ec1n anh",20:"T\xecm m\u1ed9t c\xe2y lau nh\xe0",21:"C\xf3 c\xe1i g\xec \u0111\xf3 kh\xf4ng \u0111\xfang",22:"Anh \u1ea5y mu\u1ed1n l\u01b0\u1edbt s\xf3ng",23:"M\u1edf ba l\xf4 c\u1ee7a anh \u1ea5y",24:"Anh \u1ea5y mu\u1ed1n nghe nh\u1ea1c",25:"B\u1ed9 m\u1eb7t th\u1eadt c\u1ee7a c\xf4ng ch\xfaa l\xe0 g\xec?",26:"N\xf3 l\xe0 m\u1ed9t con s\u01b0 t\u1eed?",27:"Anh \u1ea5y kh\xe1t n\u01b0\u1edbc",28:"T\u01b0\u1edbi c\xe2y",29:"T\xecm gi\u1ea5y cu\u1ed9n",30:"Troll anh \u1ea5y",31:"C\xe1 g\xec \u0111\xe2y?",32:"T\xecm v\u0169 kh\xed",33:"Troll anh \u1ea5y",34:"T\u1eaft TV \u0111i",35:"B\u1eadt n\xf3 l\xean",36:"Sau c\xf4 \u1ea5y l\xe0 g\xec",37:"Anh \u1ea5y mu\u1ed1n h\xe1t",38:"Anh \u1ea5y mu\u1ed1n ch\u01a1i b\xf3ng \u0111\xe1",39:"\u0110\xf3 c\xf3 ph\u1ea3i l\xe0 ma kh\xf4ng?",40:"T\xecm g\u1eady b\xf3ng ch\xe0y",41:"C\xf3 g\xec \u0111\u1eb7c bi\u1ec7t kh\xf4ng?",42:"B\u1ea1n c\xf3 mu\u1ed1n th\u1ea5y anh \u1ea5y t\u1eafm kh\xf4ng?",43:"C\xf3 c\xe1i g\xec \u0111\xf3 kh\xf4ng \u0111\xfang",44:"C\u1ee9u anh \u1ea5y",45:"L\xe0m cho anh \u1ea5y b\u1edbt s\u1ee3 h\xe3i",46:"PEW PEW !!!",47:"BOOM!",48:"Xem c\xe2n n\u1eb7ng c\u1ee7a anh \u1ea5y",49:"L\xe0m cho anh \u1ea5y h\u1ea1nh ph\xfac",50:"Anh \u1ea5y c\xf3 th\u1ef1c s\u1ef1 c\u01a1 b\u1eafp kh\xf4ng?"},cc._RF.pop()},{}],"polyglot.min":[function(e,t,n){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(e,o){"function"==typeof define&&define.amd?define([],function(){return o(e)}):"object"==typeof n?t.exports=o(e):e.Polyglot=o(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||c}function n(e){var t,n,o,i={};for(t in e)if(e.hasOwnProperty(t))for(o in n=e[t])i[n[o]]=t;return i}function o(e){return e.replace(/^\s+|\s+$/g,"")}function i(e,t,n){var i;return null!=n&&e?o((i=e.split(u))[a(t,n)]||i[0]):e}function r(e){var t=n(p);return t[e]||t.en}function a(e,t){return d[r(e)](t)}function s(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}function c(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var n in e)t[n]=e[n];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],t&&(o=t+"."+o),"object"==typeof n?this.extend(n,o):this.phrases[o]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var n,o;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),o=e),"string"==typeof n&&(t=l(t),o=s(o=i(n,this.currentLocale,t.smart_count),t)),o},t.prototype.has=function(e){return e in this.phrases};var u="||||",d={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},p={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],vi:[function(e,t){"use strict";cc._RF.push(t,"71ad4+chVFMJ7+KV6p14JZf","vi"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],zh:[function(e,t){"use strict";cc._RF.push(t,"7f002fjK/NKW4/bWi/77AY1","zh"),t.exports={current:"\u5f53\u524d\u8bed\u8a00\uff1a",create_language:"\u521b\u5efa\u65b0\u8bed\u8a00",language:"\u8bed\u8a00\u540d\u79f0",create:"\u521b\u5efa",cancel:"\u53d6\u6d88"},cc._RF.pop()},{}]},{},["Guide","GuideButton","Incorrect","ActionController","Analytics","BundleManager","Click","Data","Draw","EffectManager","FBInstantManager","GameManager","InsideEvent","Item","ItemPencil","LevelController","List","Loading","Mask","OptimizeScroll","Panel","Pen","Pencils","Splash","TiniController","Touch","UIController","Button","Setting","en","vi","zh","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);